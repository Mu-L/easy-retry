import{_ as Ye,d as Xe,u as Je,a as Qe,N as Ze,b as ea}from"./table-Bdl3-G-Y.js";import{d as X,an as b,ay as E,aC as Ve,ax as M,az as G,aB as re,aD as Se,bA as aa,aM as Be,bB as ta,bC as Me,bD as na,bE as la,bF as oa,bG as ra,bH as sa,ar as ua,au as Te,n as ce,bI as ia,p as te,aJ as ue,aK as ca,aG as Le,a as K,aN as da,aE as pa,B as F,b0 as $e,aS as le,bJ as Ce,bK as De,bL as ma,bM as fe,bN as ve,bO as ga,aW as he,bP as fa,o as V,b as oe,e as je,bQ as R,U as Ae,V as va,$ as n,r as ha,f as a,_ as Ie,W as Ee,c as B,w as i,g as xe,t as Ue,h as r,Q as be,R as ye,bR as ba,S as Q,bS as ya,bT as _a,a2 as Pa,a3 as Ia,a6 as Ta,bt as ka,bU as Ra,bV as Na,s as Oa,ac as wa,ad as _e,bW as Va,N as Pe,bX as $a,I as Ca,ae as Da}from"./index-CHgAHQIl.js";import{f as Aa,a as Ea,b as xa}from"./system-manage-CeFIB8SV.js";import{u as Ua,a as Sa}from"./form-BuwwOwyC.js";import{A as Ba,d as Ma,_ as La}from"./Grid-DHGKk79k.js";import{_ as ja}from"./Space-CeVCCXQI.js";import{a as Ka}from"./FormItem-B3tfy17D.js";const Fa=X({name:"ArrowUp",render(){return b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},b("g",{fill:"none"},b("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),I="0!important",Ke="-1px!important";function Z(t){return G(t+"-type",[M("& +",[E("button",{},[G(t+"-type",[re("border",{borderLeftWidth:I}),re("state-border",{left:Ke})])])])])}function ee(t){return G(t+"-type",[M("& +",[E("button",[G(t+"-type",[re("border",{borderTopWidth:I}),re("state-border",{top:Ke})])])])])}const za=E("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Ve("vertical",{flexDirection:"row"},[Ve("rtl",[E("button",[M("&:first-child:not(:last-child)",`
 margin-right: ${I};
 border-top-right-radius: ${I};
 border-bottom-right-radius: ${I};
 `),M("&:last-child:not(:first-child)",`
 margin-left: ${I};
 border-top-left-radius: ${I};
 border-bottom-left-radius: ${I};
 `),M("&:not(:first-child):not(:last-child)",`
 margin-left: ${I};
 margin-right: ${I};
 border-radius: ${I};
 `),Z("default"),G("ghost",[Z("primary"),Z("info"),Z("success"),Z("warning"),Z("error")])])])]),G("vertical",{flexDirection:"column"},[E("button",[M("&:first-child:not(:last-child)",`
 margin-bottom: ${I};
 margin-left: ${I};
 margin-right: ${I};
 border-bottom-left-radius: ${I};
 border-bottom-right-radius: ${I};
 `),M("&:last-child:not(:first-child)",`
 margin-top: ${I};
 margin-left: ${I};
 margin-right: ${I};
 border-top-left-radius: ${I};
 border-top-right-radius: ${I};
 `),M("&:not(:first-child):not(:last-child)",`
 margin: ${I};
 border-radius: ${I};
 `),ee("default"),G("ghost",[ee("primary"),ee("info"),ee("success"),ee("warning"),ee("error")])])])]),Wa={size:{type:String,default:void 0},vertical:Boolean},qa=X({name:"ButtonGroup",props:Wa,setup(t){const{mergedClsPrefixRef:f,mergedRtlRef:p}=Se(t);return aa("-button-group",za,f),Be(ta,t),{rtlEnabled:Me("ButtonGroup",p,f),mergedClsPrefix:f}},render(){const{mergedClsPrefix:t}=this;return b("div",{class:[`${t}-button-group`,this.rtlEnabled&&`${t}-button-group--rtl`,this.vertical&&`${t}-button-group--vertical`],role:"group"},this.$slots)}}),Ga=()=>sa,Ha=na({name:"DynamicInput",common:la,peers:{Input:oa,Button:ra},self:Ga}),ke=ua("n-dynamic-input"),Ya=X({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:t,placeholderRef:f}=Te(ke);return{mergedTheme:t,placeholder:f}},render(){const{mergedTheme:t,placeholder:f,value:p,clsPrefix:c,onUpdateValue:h,disabled:C}=this;return b("div",{class:`${c}-dynamic-input-preset-input`},b(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:p,placeholder:f,onUpdateValue:h,disabled:C}))}}),Xa=X({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(t){const{mergedThemeRef:f,keyPlaceholderRef:p,valuePlaceholderRef:c}=Te(ke);return{mergedTheme:f,keyPlaceholder:p,valuePlaceholder:c,handleKeyInput(h){t.onUpdateValue({key:h,value:t.value.value})},handleValueInput(h){t.onUpdateValue({key:t.value.key,value:h})}}},render(){const{mergedTheme:t,keyPlaceholder:f,valuePlaceholder:p,value:c,clsPrefix:h,disabled:C}=this;return b("div",{class:`${h}-dynamic-input-preset-pair`},b(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:c.key,class:`${h}-dynamic-input-pair-input`,placeholder:f,onUpdateValue:this.handleKeyInput,disabled:C}),b(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:c.value,class:`${h}-dynamic-input-pair-input`,placeholder:p,onUpdateValue:this.handleValueInput,disabled:C}))}}),Ja=E("dynamic-input",{width:"100%"},[E("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[E("dynamic-input-preset-input",{flex:1,alignItems:"center"}),E("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[E("dynamic-input-pair-input",[M("&:first-child",{"margin-right":"12px"})])]),re("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[G("icon",{cursor:"pointer"})]),M("&:last-child",{marginBottom:0})]),E("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[E("form-item-blank",{paddingTop:"0 !important"})])]),ie=new WeakMap,Qa=Object.assign(Object.assign({},Le.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Za=X({name:"DynamicInput",props:Qa,setup(t,{slots:f}){const{mergedComponentPropsRef:p,mergedClsPrefixRef:c,mergedRtlRef:h,inlineThemeDisabled:C}=Se(),N=Te(ia,null),D=te(t.defaultValue),x=ue(t,"value"),$=ca(x,D),e=Le("DynamicInput","-dynamic-input",Ja,Ha,t,c),P=K(()=>{const{value:l}=$;if(Array.isArray(l)){const{max:s}=t;return s!==void 0&&l.length>=s}return!1}),z=K(()=>{const{value:l}=$;return Array.isArray(l)?l.length<=t.min:!0}),W=K(()=>{var l,s;return(s=(l=p==null?void 0:p.value)===null||l===void 0?void 0:l.DynamicInput)===null||s===void 0?void 0:s.buttonSize});function w(l){const{onInput:s,"onUpdate:value":m,onUpdateValue:v}=t;s&&he(s,l),m&&he(m,l),v&&he(v,l),D.value=l}function q(l,s){if(l==null||typeof l!="object")return s;const m=fe(l)?ve(l):l;let v=ie.get(m);return v===void 0&&ie.set(m,v=ga()),v}function L(l,s){const{value:m}=$,v=Array.from(m??[]),g=v[l];if(v[l]=s,g&&s&&typeof g=="object"&&typeof s=="object"){const u=fe(g)?ve(g):g,T=fe(s)?ve(s):s,k=ie.get(u);k!==void 0&&ie.set(T,k)}w(v)}function j(){O(-1)}function O(l){const{value:s}=$,{onCreate:m}=t,v=Array.from(s??[]);if(m)v.splice(l+1,0,m(l+1)),w(v);else if(f.default)v.splice(l+1,0,null),w(v);else switch(t.preset){case"input":v.splice(l+1,0,""),w(v);break;case"pair":v.splice(l+1,0,{key:"",value:""}),w(v);break}}function U(l){const{value:s}=$;if(!Array.isArray(s))return;const{min:m}=t;if(s.length<=m)return;const{onRemove:v}=t;v&&v(l);const g=Array.from(s);g.splice(l,1),w(g)}function y(l,s,m){if(s<0||m<0||s>=l.length||m>=l.length||s===m)return;const v=l[s];l[s]=l[m],l[m]=v}function S(l,s){const{value:m}=$;if(!Array.isArray(m))return;const v=Array.from(m);l==="up"&&y(v,s,s-1),l==="down"&&y(v,s,s+1),w(v)}Be(ke,{mergedThemeRef:e,keyPlaceholderRef:ue(t,"keyPlaceholder"),valuePlaceholderRef:ue(t,"valuePlaceholder"),placeholderRef:ue(t,"placeholder")});const ne=Me("DynamicInput",h,c),H=K(()=>{const{self:{actionMargin:l,actionMarginRtl:s}}=e.value;return{"--action-margin":l,"--action-margin-rtl":s}}),d=C?da("dynamic-input",void 0,H,t):void 0;return{locale:pa("DynamicInput").localeRef,rtlEnabled:ne,buttonSize:W,mergedClsPrefix:c,NFormItem:N,uncontrolledValue:D,mergedValue:$,insertionDisabled:P,removeDisabled:z,handleCreateClick:j,ensureKey:q,handleValueChange:L,remove:U,move:S,createItem:O,mergedTheme:e,cssVars:C?void 0:H,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){const{$slots:t,itemClass:f,buttonSize:p,mergedClsPrefix:c,mergedValue:h,locale:C,mergedTheme:N,keyField:D,itemStyle:x,preset:$,showSortButton:e,NFormItem:P,ensureKey:z,handleValueChange:W,remove:w,createItem:q,move:L,onRender:j,disabled:O}=this;return j==null||j(),b("div",{class:[`${c}-dynamic-input`,this.rtlEnabled&&`${c}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(h)||h.length===0?b(F,Object.assign({block:!0,ghost:!0,dashed:!0,size:p},this.createButtonProps,{disabled:this.insertionDisabled||O,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>$e(t["create-button-default"],()=>[C.create]),icon:()=>$e(t["create-button-icon"],()=>[b(le,{clsPrefix:c},{default:()=>b(Ce,null)})])}):h.map((U,y)=>b("div",{key:D?U[D]:z(U,y),"data-key":D?U[D]:z(U,y),class:[`${c}-dynamic-input-item`,f],style:x},De(t.default,{value:h[y],index:y},()=>[$==="input"?b(Ya,{disabled:O,clsPrefix:c,value:h[y],parentPath:P?P.path.value:void 0,path:P!=null&&P.path.value?`${P.path.value}[${y}]`:void 0,onUpdateValue:S=>{W(y,S)}}):$==="pair"?b(Xa,{disabled:O,clsPrefix:c,value:h[y],parentPath:P?P.path.value:void 0,path:P!=null&&P.path.value?`${P.path.value}[${y}]`:void 0,onUpdateValue:S=>{W(y,S)}}):null]),De(t.action,{value:h[y],index:y,create:q,remove:w,move:L},()=>[b("div",{class:`${c}-dynamic-input-item__action`},b(qa,{size:p},{default:()=>[b(F,{disabled:this.removeDisabled||O,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,circle:!0,onClick:()=>{w(y)}},{icon:()=>b(le,{clsPrefix:c},{default:()=>b(ma,null)})}),b(F,{disabled:this.insertionDisabled||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{q(y)}},{icon:()=>b(le,{clsPrefix:c},{default:()=>b(Ce,null)})}),e?b(F,{disabled:y===0||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{L("up",y)}},{icon:()=>b(le,{clsPrefix:c},{default:()=>b(Fa,null)})}):null,e?b(F,{disabled:y===h.length-1||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{L("down",y)}},{icon:()=>b(le,{clsPrefix:c},{default:()=>b(Ba,null)})}):null]}))]))))}}),Fe={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};fa(Fe);const et={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},at=je("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1),tt=[at];function nt(t,f){return V(),oe("svg",et,[...tt])}const lt={name:"ic-round-remove",render:nt};function ot(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>R(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>R(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>R(()=>import("./avatar-CzPNckT2.js"),[]),"/src/assets/svg-icon/banner.svg":()=>R(()=>import("./banner-CyamVenV.js"),[]),"/src/assets/svg-icon/cast.svg":()=>R(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>R(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>R(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>R(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>R(()=>import("./empty-data-DX35y6ZB.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>R(()=>import("./expectation-Cmg76Xc5.js"),[]),"/src/assets/svg-icon/full-logo.svg":()=>R(()=>import("./full-logo-tRXjg-PT.js"),[]),"/src/assets/svg-icon/heart.svg":()=>R(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>R(()=>import("./logo-DKMQETMV.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>R(()=>import("./network-error-CegJpaAn.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>R(()=>import("./no-icon-BoYPce1Y.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>R(()=>import("./no-permission-ZchoPucC.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>R(()=>import("./not-found-D2mHJhJe.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>R(()=>import("./service-error-Dln9IYeC.js"),[]),"/src/assets/svg-icon/wind.svg":()=>R(()=>import("./wind-Dy5zdHKW.js"),[])})).map(p=>{var c;return((c=p.split("/").at(-1))==null?void 0:c.replace(".svg",""))||""}).filter(Boolean)}const de="layout.",pe="view.",ze="$";function rt(t){let f="",p="";const[c,h]=(t==null?void 0:t.split(ze))||[];return f=st(c),p=ut(h||c),{layout:f,page:p}}function st(t){return t.startsWith(de)?t.replace(de,""):""}function ut(t){return t.startsWith(pe)?t.replace(pe,""):""}function it(t,f){const p=!!t,c=!!f;return p&&c?`${de}${t}${ze}${pe}${f}`:p?`${de}${t}`:c?`${pe}${f}`:""}function ct(t){return`/${t.replace(/_/g,"/")}`}function dt(t){const[f,p=""]=t.split("/:");return{path:f,param:p}}function pt(t,f){return f.trim()?`${t}/:${f}`:t}const mt={class:"ml-8px flex-y-center flex-1 gap-12px"},gt=X({name:"MenuOperateModal",__name:"menu-operate-modal",props:Ae({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Ae(["submitted"],["update:visible"]),setup(t,{emit:f}){const p=t,c=f,h=va(t,"visible"),{formRef:C,validate:N,restoreValidation:D}=Ua(),{defaultRequiredRule:x}=Sa(),$=K(()=>({add:n("page.manage.menu.addMenu"),addChild:n("page.manage.menu.addChildMenu"),edit:n("page.manage.menu.editMenu")})[p.operateType]),e=ha(P());function P(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const z={menuName:x,status:x,routeName:x,routePath:x},W=K(()=>p.operateType==="edit"),q=ot().map(g=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(Ie,{localIcon:g,class:"text-icon"},null),a("span",null,[g])]),value:g})),L=K(()=>e.parentId===0),j=K(()=>e.menuType==="2"),O=K(()=>{const g=[...p.allPages];return e.routeName&&!g.includes(e.routeName)&&g.unshift(e.routeName),g.map(T=>({label:T,value:T}))}),U=[{label:"base",value:"base"},{label:"blank",value:"blank"}],y=te([]);async function S(){const{error:g,data:u}=await Aa();if(!g){const T=u.map(k=>({label:k.roleName,value:k.roleCode}));y.value=[...T]}}function ne(){if(Object.assign(e,P()),!!p.rowData){if(p.operateType==="addChild"){const{id:g}=p.rowData;Object.assign(e,{parentId:g})}if(p.operateType==="edit"){const{component:g,...u}=p.rowData,{layout:T,page:k}=rt(g),{path:_,param:A}=dt(u.routePath);Object.assign(e,u,{layout:T,page:k,routePath:_,pathParam:A})}e.query||(e.query=[]),e.buttons||(e.buttons=[])}}function H(){h.value=!1}function d(){e.routeName?e.routePath=ct(e.routeName):e.routePath=""}function l(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function s(){return{code:"",desc:""}}function m(){const{layout:g,page:u,pathParam:T,...k}=e,_=it(g,u),A=pt(e.routePath,T);return k.component=_,k.routePath=A,k}async function v(){var u;await N();const g=m();console.log("params: ",g),(u=window.$message)==null||u.success(n("common.updateSuccess")),H(),c("submitted")}return Ee(h,()=>{h.value&&(ne(),D(),S())}),Ee(()=>e.routeName,()=>{d(),l()}),(g,u)=>{const T=Pa,k=Ia,_=Ye,A=ce,se=Ta,Re=ka,Ne=Xe,J=F,Oe=lt,me=ja,we=Za,We=Ma,qe=Ka,Ge=Ra,He=Na;return V(),B(He,{show:h.value,"onUpdate:show":u[22]||(u[22]=o=>h.value=o),title:$.value,preset:"card",class:"w-800px"},{footer:i(()=>[a(me,{justify:"end",size:16},{default:i(()=>[a(J,{onClick:H},{default:i(()=>[xe(Ue(r(n)("common.cancel")),1)]),_:1}),a(J,{type:"primary",onClick:v},{default:i(()=>[xe(Ue(r(n)("common.confirm")),1)]),_:1})]),_:1})]),default:i(()=>[a(Ge,{class:"h-480px pr-20px"},{default:i(()=>[a(qe,{ref_key:"formRef",ref:C,model:e,rules:z,"label-placement":"left","label-width":100},{default:i(()=>[a(We,{responsive:"screen","item-responsive":""},{default:i(()=>[a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuType"),path:"menuType"},{default:i(()=>[a(k,{value:e.menuType,"onUpdate:value":u[0]||(u[0]=o=>e.menuType=o),disabled:W.value},{default:i(()=>[(V(!0),oe(be,null,ye(r(ba),o=>(V(),B(T,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuName"),path:"menuName"},{default:i(()=>[a(A,{value:e.menuName,"onUpdate:value":u[1]||(u[1]=o=>e.menuName=o),placeholder:r(n)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.routeName"),path:"routeName"},{default:i(()=>[a(A,{value:e.routeName,"onUpdate:value":u[2]||(u[2]=o=>e.routeName=o),placeholder:r(n)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.routePath"),path:"routePath"},{default:i(()=>[a(A,{value:e.routePath,"onUpdate:value":u[3]||(u[3]=o=>e.routePath=o),disabled:"",placeholder:r(n)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.pathParam"),path:"pathParam"},{default:i(()=>[a(A,{value:e.pathParam,"onUpdate:value":u[4]||(u[4]=o=>e.pathParam=o),placeholder:r(n)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),L.value?(V(),B(_,{key:0,span:"24 m:12",label:r(n)("page.manage.menu.layout"),path:"layout"},{default:i(()=>[a(se,{value:e.layout,"onUpdate:value":u[5]||(u[5]=o=>e.layout=o),options:U,placeholder:r(n)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0),j.value?(V(),B(_,{key:1,span:"24 m:12",label:r(n)("page.manage.menu.page"),path:"page"},{default:i(()=>[a(se,{value:e.page,"onUpdate:value":u[6]||(u[6]=o=>e.page=o),options:O.value,placeholder:r(n)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:i(()=>[a(A,{value:e.i18nKey,"onUpdate:value":u[7]||(u[7]=o=>e.i18nKey=o),placeholder:r(n)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.order"),path:"order"},{default:i(()=>[a(Re,{value:e.order,"onUpdate:value":u[8]||(u[8]=o=>e.order=o),class:"w-full",placeholder:r(n)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:i(()=>[a(k,{value:e.iconType,"onUpdate:value":u[9]||(u[9]=o=>e.iconType=o)},{default:i(()=>[(V(!0),oe(be,null,ye(r(ya),o=>(V(),B(T,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.icon"),path:"icon"},{default:i(()=>[e.iconType==="1"?(V(),B(A,{key:0,value:e.icon,"onUpdate:value":u[10]||(u[10]=o=>e.icon=o),placeholder:r(n)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:i(()=>[e.icon?(V(),B(Ie,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):Q("",!0)]),_:1},8,["value","placeholder"])):Q("",!0),e.iconType==="2"?(V(),B(se,{key:1,value:e.icon,"onUpdate:value":u[11]||(u[11]=o=>e.icon=o),placeholder:r(n)("page.manage.menu.form.localIcon"),options:r(q)},null,8,["value","placeholder","options"])):Q("",!0)]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuStatus"),path:"status"},{default:i(()=>[a(k,{value:e.status,"onUpdate:value":u[12]||(u[12]=o=>e.status=o)},{default:i(()=>[(V(!0),oe(be,null,ye(r(_a),o=>(V(),B(T,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:i(()=>[a(k,{value:e.keepAlive,"onUpdate:value":u[13]||(u[13]=o=>e.keepAlive=o)},{default:i(()=>[a(T,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(T,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.constant"),path:"constant"},{default:i(()=>[a(k,{value:e.constant,"onUpdate:value":u[14]||(u[14]=o=>e.constant=o)},{default:i(()=>[a(T,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(T,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.href"),path:"href"},{default:i(()=>[a(A,{value:e.href,"onUpdate:value":u[15]||(u[15]=o=>e.href=o),placeholder:r(n)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:i(()=>[a(k,{value:e.hideInMenu,"onUpdate:value":u[16]||(u[16]=o=>e.hideInMenu=o)},{default:i(()=>[a(T,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(T,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.hideInMenu?(V(),B(_,{key:2,span:"24 m:12",label:r(n)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:i(()=>[a(se,{value:e.activeMenu,"onUpdate:value":u[17]||(u[17]=o=>e.activeMenu=o),options:O.value,clearable:"",placeholder:r(n)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.multiTab"),path:"multiTab"},{default:i(()=>[a(k,{value:e.multiTab,"onUpdate:value":u[18]||(u[18]=o=>e.multiTab=o)},{default:i(()=>[a(T,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(T,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:i(()=>[a(Re,{value:e.fixedIndexInTab,"onUpdate:value":u[19]||(u[19]=o=>e.fixedIndexInTab=o),class:"w-full",clearable:"",placeholder:r(n)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:r(n)("page.manage.menu.query")},{default:i(()=>[a(we,{value:e.query,"onUpdate:value":u[20]||(u[20]=o=>e.query=o),preset:"pair","key-placeholder":r(n)("page.manage.menu.form.queryKey"),"value-placeholder":r(n)("page.manage.menu.form.queryValue")},{action:i(({index:o,create:Y,remove:ge})=>[a(me,{class:"ml-12px"},{default:i(()=>[a(J,{size:"medium",onClick:()=>Y(o)},{default:i(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(J,{size:"medium",onClick:()=>ge(o)},{default:i(()=>[a(Oe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:r(n)("page.manage.menu.button")},{default:i(()=>[a(we,{value:e.buttons,"onUpdate:value":u[21]||(u[21]=o=>e.buttons=o),"on-create":s},{default:i(({value:o})=>[je("div",mt,[a(A,{value:o.code,"onUpdate:value":Y=>o.code=Y,placeholder:r(n)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(A,{value:o.desc,"onUpdate:value":Y=>o.desc=Y,placeholder:r(n)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:i(({index:o,create:Y,remove:ge})=>[a(me,{class:"ml-12px"},{default:i(()=>[a(J,{size:"medium",onClick:()=>Y(o)},{default:i(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(J,{size:"medium",onClick:()=>ge(o)},{default:i(()=>[a(Oe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function ae(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Da(t)}const It=X({name:"manage_menu",__name:"index",setup(t){const f=Oa(),{bool:p,setTrue:c}=wa(),h=te(null),{columns:C,columnChecks:N,data:D,loading:x,pagination:$,getData:e}=Je({apiFn:Ea,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:n("page.manage.menu.id"),align:"center"},{key:"menuType",title:n("page.manage.menu.menuType"),align:"center",width:80,render:d=>{const l={1:"default",2:"primary"},s=n(Va[d.menuType]);return a(Pe,{type:l[d.menuType]},ae(s)?s:{default:()=>[s]})}},{key:"menuName",title:n("page.manage.menu.menuName"),align:"center",minWidth:120,render:d=>{const{i18nKey:l,menuName:s}=d,m=l?n(l):s;return a("span",null,[m])}},{key:"icon",title:n("page.manage.menu.icon"),align:"center",width:60,render:d=>{const l=d.iconType==="1"?d.icon:void 0,s=d.iconType==="2"?d.icon:void 0;return a("div",{class:"flex-center"},[a(Ie,{icon:l,localIcon:s,class:"text-icon"},null)])}},{key:"routeName",title:n("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:n("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:n("page.manage.menu.menuStatus"),align:"center",width:80,render:d=>{if(d.status===null)return null;const l={1:"success",2:"warning"},s=n($a[d.status]);return a(Pe,{type:l[d.status]},ae(s)?s:{default:()=>[s]})}},{key:"hideInMenu",title:n("page.manage.menu.hideInMenu"),align:"center",width:80,render:d=>{const l=d.hideInMenu?"Y":"N",s={Y:"error",N:"default"},m=n(Fe[l]);return a(Pe,{type:s[l]},ae(m)?m:{default:()=>[m]})}},{key:"parentId",title:n("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:n("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:n("common.operate"),align:"center",width:230,render:d=>{let l,s;return a("div",{class:"flex-center justify-end gap-8px"},[d.menuType==="1"&&a(F,{type:"primary",ghost:!0,size:"small",onClick:()=>y(d)},ae(l=n("page.manage.menu.addChildMenu"))?l:{default:()=>[l]}),a(F,{type:"primary",ghost:!0,size:"small",onClick:()=>U(d)},ae(s=n("common.edit"))?s:{default:()=>[s]}),a(Ze,{onPositiveClick:()=>j(d.id)},{default:()=>n("common.confirmDelete"),trigger:()=>{let m;return a(F,{type:"error",ghost:!0,size:"small"},ae(m=n("common.delete"))?m:{default:()=>[m]})}})])}}]}),{checkedRowKeys:P,onBatchDeleted:z,onDeleted:W}=Qe(D,e),w=te("add");function q(){w.value="add",c()}async function L(){console.log(P.value),z()}function j(d){console.log(d),W()}const O=te(null);function U(d){w.value="edit",O.value={...d},c()}function y(d){w.value="addChild",O.value={...d},c()}const S=te([]);async function ne(){const{data:d}=await xa();S.value=d||[]}function H(){ne()}return H(),(d,l)=>{const s=ea,m=La,v=Ca;return V(),oe("div",{ref_key:"wrapperRef",ref:h,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(v,{title:r(n)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":i(()=>[a(s,{columns:r(N),"onUpdate:columns":l[0]||(l[0]=g=>_e(N)?N.value=g:null),"disabled-delete":r(P).length===0,loading:r(x),onAdd:q,onDelete:L,onRefresh:r(e)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:i(()=>[a(m,{"checked-row-keys":r(P),"onUpdate:checkedRowKeys":l[1]||(l[1]=g=>_e(P)?P.value=g:null),columns:r(C),data:r(D),size:"small","flex-height":!r(f).isMobile,"scroll-x":1088,loading:r(x),"row-key":g=>g.id,remote:"",pagination:r($),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(gt,{visible:r(p),"onUpdate:visible":l[2]||(l[2]=g=>_e(p)?p.value=g:null),"operate-type":w.value,"row-data":O.value,"all-pages":S.value,onSubmitted:r(e)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{It as default};
