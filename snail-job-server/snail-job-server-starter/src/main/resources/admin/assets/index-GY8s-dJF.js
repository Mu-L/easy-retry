import{_ as Ie,u as De,a as xe,N as E,d as ze,b as Re}from"./table-Bdl3-G-Y.js";import{bi as q,o as M,b as ce,e as fe,d as Q,U as Z,V as ee,a as Ue,$ as a,r as ge,p as A,W as ye,i as oe,c as H,w as r,f as e,g as v,t as h,h as t,a1 as K,Y as re,dG as ne,a6 as se,n as ue,B,a4 as Ve,O as $e,bk as Ce,a8 as ae,cz as _e,cy as be,N as le,bg as Be,cd as Ae,bh as Me,ac as de,s as qe,ad as W,Q as J,M as X,I as Le,ae as Ge}from"./index-CHgAHQIl.js";import{u as ve,a as he}from"./form-BuwwOwyC.js";import{_ as ie}from"./operate-drawer-3XJn0MkC.js";import{e as pe}from"./group-BUALrrKR.js";import{f as Ne}from"./retry-scene-BlErNK4f.js";import{_ as Pe}from"./code-mirror.vue_vue_type_script_setup_true_lang-Bu9xLnRf.js";import{_ as ke,a as Te}from"./FormItem-B3tfy17D.js";import{_ as Se}from"./Space-CeVCCXQI.js";import{_ as Fe}from"./search-form.vue_vue_type_script_setup_true_lang-BfZ4by1v.js";import{_ as Oe,a as We}from"./log-BNPnMg-G.js";import{_ as He,a as je}from"./DescriptionsItem-sCQ7QkHp.js";import{_ as Ee}from"./Grid-DHGKk79k.js";import"./close-fullscreen-rounded-DtEdfPev.js";import"./index-DBxP5q3t.js";import"./round-search-KK91k1IY.js";function Ze(p){return q({url:"/retry-task/list",method:"get",params:p})}function Ke(p,S){return q({url:`/retry-task/${p}?groupName=${S}`,method:"get"})}function Qe(p){return q({url:"/retry-task",method:"post",data:p})}function Ye(p){return q({url:"/retry-task/batch",method:"post",data:p})}function Je(p){return q({url:"/retry-task/status",method:"put",data:p})}function Xe(p){return q({url:"/retry-task/manual/trigger/retry/task",method:"post",data:p})}function me(p){return q({url:"/retry-task/batch",method:"delete",data:p})}function et(p){return q({url:"/retry-task/generate/idempotent-id",method:"post",data:p})}const tt={class:"inline-block",viewBox:"0 0 36 36",width:"1em",height:"1em"},at=fe("path",{fill:"currentColor",d:"M15 32H3a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2M5 30h8a1 1 0 0 0 1-1V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v25a1 1 0 0 0 1 1M9 5.92a1.5 1.5 0 1 1-1.5 1.5A1.5 1.5 0 0 1 9 5.92M6 12.2h5.84v1.6H6Zm0 3h5.84v1.6H6Zm0 3h6v1.6H6ZM16 8h2v1.6h-2zm4 0h2v1.6h-2zm13-3.8h-8a.8.8 0 0 0-.8.8v6a.8.8 0 0 0 .8.8h8a.8.8 0 0 0 .8-.8V5a.8.8 0 0 0-.8-.8m-.8 6h-6.4V5.8h6.4ZM16 20h2v1.6h-2zm4 0h2v1.6h-2zm13-3.8h-8a.8.8 0 0 0-.8.8v6a.8.8 0 0 0 .8.8h8a.8.8 0 0 0 .8-.8v-6a.8.8 0 0 0-.8-.8m-.8 6h-6.4v-4.4h6.4Z"},null,-1),lt=fe("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1),ot=[at,lt];function rt(p,S){return M(),ce("svg",tt,[...ot])}const nt={name:"clarity-thin-client-solid",render:rt},st=Q({name:"RetryTaskOperateDrawer",__name:"retry-task-operate-drawer",props:Z({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Z(["submitted"],["update:visible"]),setup(p,{emit:S}){const _=p,d=S,k=ee(p,"visible"),{formRef:V,validate:I,restoreValidation:w}=ve(),{defaultRequiredRule:m}=he(),z=Ue(()=>({add:a("page.retryTask.addRetryTask"),edit:a("page.retryTask.editRetryTask")})[_.operateType]),u=ge(b()),f=A([]),s=A([]);function b(){return{groupName:"",sceneName:"",idempotentId:"",bizNo:"",executorName:"",argsStr:"",retryStatus:0}}const g={groupName:m,sceneName:m,idempotentId:m,bizNo:m,executorName:m,argsStr:m,retryStatus:m};function T(){if(_.operateType==="add"){Object.assign(u,b());return}_.operateType==="edit"&&_.rowData&&Object.assign(u,_.rowData)}function i(){k.value=!1}async function R(){var N;if(await I(),_.operateType==="add"){const{groupName:l,sceneName:y,idempotentId:D,bizNo:C,executorName:G,argsStr:P,retryStatus:j}=u,{error:F}=await Qe({groupName:l,sceneName:y,idempotentId:D,bizNo:C,executorName:G,argsStr:P,retryStatus:j});if(F)return;(N=window.$message)==null||N.success(a("common.addSuccess"))}i(),d("submitted")}ye(k,()=>{k.value&&(T(),w())});async function $(){const N=await pe();f.value=N.data}async function U(N){if(N){const l=await Ne({groupName:N});s.value=l.data.map(y=>y.sceneName)}else u.sceneName="",s.value=[]}async function L(){const N=u.groupName,l=u.sceneName,y=u.executorName,D=u.argsStr,{data:C,error:G}=await et({groupName:N,sceneName:l,executorName:y,argsStr:D});G||(u.idempotentId=C)}return oe(()=>{$()}),(N,l)=>{const y=se,D=ke,C=ue,G=nt,P=B,j=Ve,F=$e,n=Te,o=Se;return M(),H(ie,{modelValue:k.value,"onUpdate:modelValue":l[7]||(l[7]=c=>k.value=c),title:z.value,onHandleSubmit:R},{footer:r(()=>[e(o,{size:16},{default:r(()=>[e(P,{onClick:i},{default:r(()=>[v(h(t(a)("common.cancel")),1)]),_:1}),e(P,{type:"primary",onClick:R},{default:r(()=>[v(h(t(a)("common.save")),1)]),_:1})]),_:1})]),default:r(()=>[e(n,{ref_key:"formRef",ref:V,model:u,rules:g},{default:r(()=>[e(D,{label:t(a)("page.retryTask.groupName"),path:"groupName"},{default:r(()=>[e(y,{value:u.groupName,"onUpdate:value":l[0]||(l[0]=c=>u.groupName=c),placeholder:t(a)("page.retryTask.form.groupName"),options:t(K)(f.value),disabled:_.operateType==="edit",onUpdateValue:U},null,8,["value","placeholder","options","disabled"])]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.sceneName"),path:"sceneName"},{default:r(()=>[e(y,{value:u.sceneName,"onUpdate:value":l[1]||(l[1]=c=>u.sceneName=c),placeholder:t(a)("page.retryTask.form.sceneName"),options:t(K)(s.value),disabled:_.operateType==="edit"},null,8,["value","placeholder","options","disabled"])]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.idempotentId"),path:"idempotentId"},{default:r(()=>[e(F,null,{default:r(()=>[e(C,{value:u.idempotentId,"onUpdate:value":l[2]||(l[2]=c=>u.idempotentId=c),placeholder:t(a)("page.retryTask.form.idempotentId"),disabled:_.operateType==="edit"},null,8,["value","placeholder","disabled"]),e(j,{trigger:"hover"},{trigger:r(()=>[e(P,{type:"default",ghost:"",disabled:_.operateType==="edit",onClick:L},{default:r(()=>[e(G,{class:"text-icon"})]),_:1},8,["disabled"])]),default:r(()=>[v(" "+h(t(a)("page.retryTask.generateIdempotentId")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.bizNo"),path:"bizNo"},{default:r(()=>[e(C,{value:u.bizNo,"onUpdate:value":l[3]||(l[3]=c=>u.bizNo=c),placeholder:t(a)("page.retryTask.form.bizNo"),disabled:_.operateType==="edit"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.executorName"),path:"executorName"},{default:r(()=>[e(C,{value:u.executorName,"onUpdate:value":l[4]||(l[4]=c=>u.executorName=c),placeholder:t(a)("page.retryTask.form.executorName"),disabled:_.operateType==="edit"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.argsStr"),path:"argsStr"},{default:r(()=>[e(Pe,{modelValue:u.argsStr,"onUpdate:modelValue":l[5]||(l[5]=c=>u.argsStr=c),lang:"json",placeholder:t(a)("page.jobTask.form.argsStr")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(D,{label:t(a)("page.retryTask.retryStatus"),path:"retryStatus"},{default:r(()=>[e(y,{value:u.retryStatus,"onUpdate:value":l[6]||(l[6]=c=>u.retryStatus=c),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(re)(t(ne))},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),ut=Q({name:"RetryTaskBatchAddDrawer",__name:"retry-task-batch-add-drawer",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:Z(["submitted"],["update:visible"]),setup(p,{emit:S}){const _=S,d=ee(p,"visible"),{formRef:k,validate:V,restoreValidation:I}=ve(),{defaultRequiredRule:w}=he(),m=ge(u()),z=A([]);function u(){return{groupName:"",retryStatus:0,logStr:""}}const f={groupName:w,retryStatus:w,logStr:w};function s(){d.value=!1}async function b(){var U;await V();const{groupName:T,retryStatus:i,logStr:R}=m,{error:$}=await Ye({groupName:T,retryStatus:i,logStr:R});$||((U=window.$message)==null||U.success(a("common.addSuccess")),s(),_("submitted"))}async function g(){const T=await pe();z.value=T.data}return ye(d,()=>{d.value&&I()}),oe(()=>{g()}),(T,i)=>{const R=se,$=ke,U=ue,L=Te,N=B,l=Se;return M(),H(ie,{modelValue:d.value,"onUpdate:modelValue":i[3]||(i[3]=y=>d.value=y),title:t(a)("page.retryTask.batchAddRetryTask"),onHandleSubmit:b},{footer:r(()=>[e(l,{size:16},{default:r(()=>[e(N,{onClick:s},{default:r(()=>[v(h(t(a)("common.cancel")),1)]),_:1}),e(N,{type:"primary",onClick:b},{default:r(()=>[v(h(t(a)("common.save")),1)]),_:1})]),_:1})]),default:r(()=>[e(L,{ref_key:"formRef",ref:k,model:m,rules:f},{default:r(()=>[e($,{label:t(a)("page.retryTask.groupName"),path:"groupName"},{default:r(()=>[e(R,{value:m.groupName,"onUpdate:value":i[0]||(i[0]=y=>m.groupName=y),placeholder:t(a)("page.retryTask.form.groupName"),options:t(K)(z.value)},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e($,{label:t(a)("page.retryTask.retryStatus"),path:"retryStatus"},{default:r(()=>[e(R,{value:m.retryStatus,"onUpdate:value":i[1]||(i[1]=y=>m.retryStatus=y),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(re)(t(ne))},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e($,{label:t(a)("page.retryTask.form.logStr"),path:"logStr"},{default:r(()=>[e(U,{value:m.logStr,"onUpdate:value":i[2]||(i[2]=y=>m.logStr=y),type:"textarea",placeholder:t(a)("page.retryTask.form.logStr")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),it=Q({name:"RetryTaskSearch",__name:"retry-task-search",props:{model:{required:!0},modelModifiers:{}},emits:Z(["reset","search"],["update:model"]),setup(p,{emit:S}){const _=S,d=ee(p,"model"),k=A([]),V=A([]);function I(){_("reset")}function w(){_("search")}async function m(){const u=await pe();k.value=u.data}async function z(u){if(u){const f=await Ne({groupName:u});V.value=f.data.map(s=>s.sceneName)}else d.value.sceneName="",V.value=[]}return oe(()=>{m()}),(u,f)=>{const s=se,b=Ie,g=ue,T=Fe;return M(),H(T,{model:d.value,onSearch:w,onReset:I},{default:r(()=>[e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.groupName"),path:"groupName",class:"pr-24px"},{default:r(()=>[e(s,{value:d.value.groupName,"onUpdate:value":[f[0]||(f[0]=i=>d.value.groupName=i),z],placeholder:t(a)("page.retryTask.form.groupName"),options:t(K)(k.value),clearable:"",filterable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.sceneName"),path:"sceneName",class:"pr-24px"},{default:r(()=>[e(s,{value:d.value.sceneName,"onUpdate:value":f[1]||(f[1]=i=>d.value.sceneName=i),placeholder:t(a)("page.retryTask.form.sceneName"),options:t(K)(V.value),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.uniqueId"),path:"uniqueId",class:"pr-24px"},{default:r(()=>[e(g,{value:d.value.uniqueId,"onUpdate:value":f[2]||(f[2]=i=>d.value.uniqueId=i),placeholder:t(a)("page.retryTask.form.uniqueId")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.idempotentId"),path:"idempotentId",class:"pr-24px"},{default:r(()=>[e(g,{value:d.value.idempotentId,"onUpdate:value":f[3]||(f[3]=i=>d.value.idempotentId=i),placeholder:t(a)("page.retryTask.form.idempotentId")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.bizNo"),path:"bizNo",class:"pr-24px"},{default:r(()=>[e(g,{value:d.value.bizNo,"onUpdate:value":f[4]||(f[4]=i=>d.value.bizNo=i),placeholder:t(a)("page.retryTask.form.bizNo")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(b,{span:"24 s:12 m:6",label:t(a)("page.retryTask.retryStatus"),path:"retryStatus",class:"pr-24px"},{default:r(()=>[e(s,{value:d.value.retryStatus,"onUpdate:value":f[5]||(f[5]=i=>d.value.retryStatus=i),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(re)(t(ne))},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model"])}}}),pt=Q({name:"SceneDetailDrawer",__name:"retry-task-detail-drawer",props:Z({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(p){const S=p,_=ee(p,"visible"),d=A([]),k=A(),V=new AbortController,I=A(!1);let w="0",m=0;async function z(){const{data:s,error:b}=await We({groupName:S.rowData.groupName,uniqueId:S.rowData.uniqueId,startId:w,fromIndex:m,size:50});b||(I.value=s.finished,w=s.nextStartId,m=s.fromIndex,s.message&&(d.value.push(...s.message),d.value.sort((g,T)=>Number.parseInt(g.time_stamp,10)-Number.parseInt(T.time_stamp,10))),I.value||(clearTimeout(k.value),k.value=setTimeout(z,1e3)))}const u=async s=>{s===1&&d.value.length===0&&await z()},f=()=>{I.value=!0,V.abort(),clearTimeout(k.value),k.value=void 0};return Ce(()=>{f()}),(s,b)=>{const g=He,T=le,i=je,R=Be,$=Oe,U=Ae,L=Me,N=ie;return M(),H(N,{modelValue:_.value,"onUpdate:modelValue":b[1]||(b[1]=l=>_.value=l),title:t(a)("page.retryTask.detail")},{default:r(()=>[e(L,{type:"segment",animated:"","onUpdate:value":u},{default:r(()=>[e(R,{name:0,tab:t(a)("page.log.info")},{default:r(()=>[e(i,{"label-placement":"top",bordered:"",column:2},{default:r(()=>[e(g,{label:t(a)("page.retryTask.uniqueId"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.uniqueId),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.groupName"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.groupName),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.sceneName"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.sceneName),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.nextTriggerAt"),span:1},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.nextTriggerAt),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.retryCount"),span:1},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.retryCount),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.retryStatus"),span:1},{default:r(()=>{var l;return[e(T,{type:t(ae)((l=s.rowData)==null?void 0:l.retryStatus)},{default:r(()=>{var y;return[v(h(t(a)(t(_e)[(y=s.rowData)==null?void 0:y.retryStatus])),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.taskType"),span:1},{default:r(()=>{var l;return[e(T,{type:t(ae)((l=s.rowData)==null?void 0:l.taskType)},{default:r(()=>{var y;return[v(h(t(a)(t(be)[(y=s.rowData)==null?void 0:y.taskType])),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.bizNo"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.bizNo),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.idempotentId"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.idempotentId),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.executorName"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.executorName),1)]}),_:1},8,["label"]),e(g,{label:t(a)("page.retryTask.argsStr"),span:2},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.argsStr),1)]}),_:1},8,["label"]),e(g,{label:t(a)("common.createDt"),span:1},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.createDt),1)]}),_:1},8,["label"]),e(g,{label:t(a)("common.updateDt"),span:1},{default:r(()=>{var l;return[v(h((l=s.rowData)==null?void 0:l.updateDt),1)]}),_:1},8,["label"])]),_:1})]),_:1},8,["tab"]),e(R,{name:1,tab:t(a)("page.log.title"),"display-directive":"if"},{default:r(()=>[d.value.length>0?(M(),H($,{key:0,modelValue:d.value,"onUpdate:modelValue":b[0]||(b[0]=l=>d.value=l),drawer:!1},null,8,["modelValue"])):(M(),H(U,{key:1,class:"h-full"}))]),_:1},8,["tab"])]),_:1})]),_:1},8,["modelValue","title"])}}}),dt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function O(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!Ge(p)}const xt=Q({name:"retry_task",__name:"index",setup(p){const S=A(),{bool:_,setTrue:d}=de(!1),k=qe(),{columns:V,columnChecks:I,data:w,getData:m,loading:z,mobilePagination:u,searchParams:f,resetSearchParams:s}=De({apiFn:Ze,apiParams:{page:1,size:10,uniqueId:null,groupName:null,sceneName:null,idempotentId:null,bizNo:null,retryStatus:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"uniqueId",title:a("page.retryTask.uniqueId"),align:"left",fixed:"left",minWidth:120,render:n=>{async function o(){await l(n),d()}return e(B,{text:!0,tag:"a",type:"primary",onClick:o,class:"ws-normal"},{default:()=>[n.uniqueId]})}},{key:"groupName",title:a("page.retryTask.groupName"),align:"left",resizable:!0,minWidth:120,maxWidth:250},{key:"sceneName",title:a("page.retryTask.sceneName"),align:"left",minWidth:120},{key:"nextTriggerAt",title:a("page.retryTask.nextTriggerAt"),align:"left",resizable:!0,minWidth:120,maxWidth:150},{key:"retryCount",title:a("page.retryTask.retryCount"),align:"center",width:80},{key:"retryStatus",title:a("page.retryTask.retryStatus"),align:"left",width:120,render:n=>{if(n.retryStatus===null)return null;const o=a(_e[n.retryStatus]);return e(le,{type:ae(n.retryStatus)},O(o)?o:{default:()=>[o]})}},{key:"taskType",title:a("page.retryTask.taskType"),align:"left",width:100,render:n=>{if(n.taskType===null)return null;const o={1:"warning",2:"error"},c=a(be[n.taskType]);return e(le,{type:o[n.taskType]},O(c)?c:{default:()=>[c]})}},{key:"idempotentId",title:a("page.retryTask.idempotentId"),align:"left",resizable:!0,minWidth:150,maxWidth:300},{key:"bizNo",title:a("page.retryTask.bizNo"),align:"left",resizable:!0,minWidth:150,maxWidth:300},{key:"operate",title:a("common.operate"),align:"left",width:260,fixed:"right",render:n=>e("div",{class:"flex-center gap-8px"},[n.retryStatus!==1&&n.retryStatus!==2?e(J,null,[e(E,{onPositiveClick:()=>C(n.groupName,n.uniqueId)},{default:()=>a("common.confirmExecute"),trigger:()=>{let o;return e(B,{type:"info",text:!0,ghost:!0,size:"small"},O(o=a("common.execute"))?o:{default:()=>[o]})}}),e(X,{vertical:!0},null)]):"",n.retryStatus!==1&&n.retryStatus!==2?e(J,null,[e(E,{onPositiveClick:()=>j(Number(n.id),n.groupName)},{default:()=>a("common.confirmFinish"),trigger:()=>{let o;return e(B,{type:"warning",text:!0,ghost:!0,size:"small"},O(o=a("common.finish"))?o:{default:()=>[o]})}}),e(X,{vertical:!0},null)]):"",n.retryStatus===0?e(J,null,[e(E,{onPositiveClick:()=>P(Number(n.id),n.groupName)},{default:()=>a("common.confirmPause"),trigger:()=>{let o;return e(B,{type:"success",text:!0,ghost:!0,size:"small"},O(o=a("common.pause"))?o:{default:()=>[o]})}}),e(X,{vertical:!0},null)]):"",n.retryStatus===3?e(J,null,[e(E,{onPositiveClick:()=>G(Number(n.id),n.groupName)},{default:()=>a("common.confirmResume"),trigger:()=>{let o;return e(B,{type:"info",text:!0,ghost:!0,size:"small"},O(o=a("common.resume"))?o:{default:()=>[o]})}}),e(X,{vertical:!0},null)]):"",e(E,{onPositiveClick:()=>N(n.groupName,n.id)},{default:()=>a("common.confirmDelete"),trigger:()=>{let o;return e(B,{type:"error",text:!0,ghost:!0,size:"small"},O(o=a("common.delete"))?o:{default:()=>[o]})}})])}]}),{drawerVisible:b,operateType:g,handleAdd:T,checkedRowKeys:i,onBatchDeleted:R,onDeleted:$}=xe(w,m),{bool:U,setTrue:L}=de();async function N(n,o){const{error:c}=await me({groupName:n,ids:[o]});c||$()}async function l(n){const o=await Ke(n.id,n.groupName);S.value=o.data||null}async function y(){const n=i.value;if(n.length===0)return;const o=w.value[0].groupName,{error:c}=await me({groupName:o,ids:n});c||R()}function D(){L()}function C(n,o){Xe({groupName:n,uniqueIds:[o]})}function G(n,o){F(n,o,0)}function P(n,o){F(n,o,3)}function j(n,o){F(n,o,1)}async function F(n,o,c){var Y;const{error:te}=await Je({id:n,groupName:o,retryStatus:c});te||((Y=window.$message)==null||Y.success(a("common.updateSuccess")),m())}return(n,o)=>{const c=ze,te=Re,Y=Ee,we=Le;return M(),ce("div",dt,[e(it,{model:t(f),"onUpdate:model":o[0]||(o[0]=x=>W(f)?f.value=x:null),onReset:t(s),onSearch:t(m)},null,8,["model","onReset","onSearch"]),e(we,{title:t(a)("page.retryTask.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper","header-class":"view-card-header"},{"header-extra":r(()=>[e(te,{columns:t(I),"onUpdate:columns":o[1]||(o[1]=x=>W(I)?I.value=x:null),"disabled-delete":t(i).length===0,loading:t(z),onAdd:t(T),onDelete:y,onRefresh:t(m)},{addAfter:r(()=>[e(t(B),{size:"small",ghost:"",type:"primary",onClick:D},{icon:r(()=>[e(c,{class:"text-icon"})]),default:r(()=>[v(" "+h(t(a)("common.batchAdd")),1)]),_:1})]),_:1},8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:r(()=>[e(Y,{"checked-row-keys":t(i),"onUpdate:checkedRowKeys":o[2]||(o[2]=x=>W(i)?i.value=x:null),columns:t(V),data:t(w),"flex-height":!t(k).isMobile,"scroll-x":2e3,loading:t(z),remote:"","row-key":x=>x.id,pagination:t(u),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(st,{visible:t(b),"onUpdate:visible":o[3]||(o[3]=x=>W(b)?b.value=x:null),"operate-type":t(g),onSubmitted:t(m)},null,8,["visible","operate-type","onSubmitted"]),e(ut,{visible:t(U),"onUpdate:visible":o[4]||(o[4]=x=>W(U)?U.value=x:null),onSubmitted:t(m)},null,8,["visible","onSubmitted"]),e(pt,{visible:t(_),"onUpdate:visible":o[5]||(o[5]=x=>W(_)?_.value=x:null),"row-data":S.value},null,8,["visible","row-data"])]),_:1},8,["title"])])}}});export{xt as default};
