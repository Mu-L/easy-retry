import{ay as ie,az as ae,d as G,aD as to,bA as no,p as N,a as te,i as We,bk as wo,an as K,db as $o,W as F,aL as re,aJ as Pe,ax as ee,cN as xo,dT as So,aB as Vo,c4 as Co,dU as Bo,bE as To,aA as Ze,aG as lo,dV as jo,bC as Io,b5 as Uo,aN as Ro,dW as Lo,T as Do,dN as Eo,b0 as zo,dX as Mo,o as i,b as j,e as c,c as I,w as t,g as B,t as x,f as o,n as Fe,B as ne,dR as ce,Q as oe,R as se,h as s,dY as Oo,dZ as g,d_ as Ye,a6 as Se,a2 as Ve,a3 as Ce,cg as de,ch as ue,d$ as ao,e0 as so,bf as pe,e1 as Ao,cA as qo,e2 as Po,e3 as Wo,e4 as Fo,N as be,cB as Yo,e5 as ge,e6 as X,S as T,e7 as Ke,e8 as Qe,e9 as eo,b1 as Be,ae as Ho,ea as Go,eb as Jo,be as io,a4 as he,I as Xo,bg as Zo,bh as Ko,ec as Ne,ed as ye,bd as He,ee as Qo,d1 as Te,ef as me,A as ke,eg as et,eh as ot,M as uo,_ as je,ei as tt,ej as nt,ek as lt,el as ro,em as co,en as at,eo as po,ep as st,eq as it,er as mo,es as dt,bs as ut,et as rt,eu as ct,bt as pt}from"./index-CHgAHQIl.js";import{h as Ie,_ as mt,i as ft,c as vt,d as _t}from"./Grid-DHGKk79k.js";import{_ as Ue,a as Re}from"./FormItem-B3tfy17D.js";import{_ as Le}from"./Space-CeVCCXQI.js";import{_ as we,a as $e}from"./DescriptionsItem-sCQ7QkHp.js";import{e as fo,j as vo,o as _o}from"./index-DBxP5q3t.js";function ht(l){return typeof l=="string"?document.querySelector(l):typeof l=="function"?l():l}function bt(l){return l instanceof HTMLElement?l.scrollTop:window.scrollY}function gt(l){return l instanceof HTMLElement?l.getBoundingClientRect():{top:0,bottom:window.innerHeight}}const Nt=ie("affix",[ae("affixed",{position:"fixed"},[ae("absolute-positioned",{position:"absolute"})])]),yt={listenTo:[String,Object,Function],top:Number,bottom:Number,triggerTop:Number,triggerBottom:Number,position:{type:String,default:"fixed"},offsetTop:{type:Number,validator:()=>!0,default:void 0},offsetBottom:{type:Number,validator:()=>!0,default:void 0},target:{type:Function,validator:()=>!0,default:void 0}},kt=G({name:"Affix",props:yt,setup(l){const{mergedClsPrefixRef:w}=to(l);no("-affix",Nt,w);let f=null;const V=N(!1),a=N(!1),e=N(null),n=N(null),p=te(()=>a.value||V.value),r=te(()=>{var v,$;return($=(v=l.triggerTop)!==null&&v!==void 0?v:l.offsetTop)!==null&&$!==void 0?$:l.top}),_=te(()=>{var v,$;return($=(v=l.top)!==null&&v!==void 0?v:l.triggerTop)!==null&&$!==void 0?$:l.offsetTop}),m=te(()=>{var v,$;return($=(v=l.bottom)!==null&&v!==void 0?v:l.triggerBottom)!==null&&$!==void 0?$:l.offsetBottom}),d=te(()=>{var v,$;return($=(v=l.triggerBottom)!==null&&v!==void 0?v:l.offsetBottom)!==null&&$!==void 0?$:l.bottom}),b=N(null),y=()=>{const{target:v,listenTo:$}=l;v?f=v():$?f=ht($):f=document,f&&(f.addEventListener("scroll",C),C())};function C(){$o(U)}function U(){const{value:v}=b;if(!f||!v)return;const $=bt(f);if(p.value){n.value!==null&&$<n.value&&(V.value=!1,n.value=null),e.value!==null&&$>e.value&&(a.value=!1,e.value=null);return}const M=gt(f),R=v.getBoundingClientRect(),O=R.top-M.top,H=M.bottom-R.bottom,h=r.value,S=d.value;h!==void 0&&O<=h?(V.value=!0,n.value=$-(h-O)):(V.value=!1,n.value=null),S!==void 0&&H<=S?(a.value=!0,e.value=$+S-H):(a.value=!1,e.value=null)}return We(()=>{y()}),wo(()=>{f&&f.removeEventListener("scroll",C)}),{selfRef:b,affixed:p,mergedClsPrefix:w,mergedstyle:te(()=>{const v={};return V.value&&r.value!==void 0&&_.value!==void 0&&(v.top=`${_.value}px`),a.value&&d.value!==void 0&&m.value!==void 0&&(v.bottom=`${m.value}px`),v})}},render(){const{mergedClsPrefix:l}=this;return K("div",{ref:"selfRef",class:[`${l}-affix`,{[`${l}-affix--affixed`]:this.affixed,[`${l}-affix--absolute-positioned`]:this.position==="absolute"}],style:this.mergedstyle},this.$slots)}}),oo=G({name:"SlotMachineNumber",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],required:!0},oldOriginalNumber:{type:Number,default:void 0},newOriginalNumber:{type:Number,default:void 0}},setup(l){const w=N(null),f=N(l.value),V=N(l.value),a=N("up"),e=N(!1),n=te(()=>e.value?`${l.clsPrefix}-base-slot-machine-current-number--${a.value}-scroll`:null),p=te(()=>e.value?`${l.clsPrefix}-base-slot-machine-old-number--${a.value}-scroll`:null);F(Pe(l,"value"),(m,d)=>{f.value=d,V.value=m,re(r)});function r(){const m=l.newOriginalNumber,d=l.oldOriginalNumber;d===void 0||m===void 0||(m>d?_("up"):d>m&&_("down"))}function _(m){a.value=m,e.value=!1,re(()=>{var d;(d=w.value)===null||d===void 0||d.offsetWidth,e.value=!0})}return()=>{const{clsPrefix:m}=l;return K("span",{ref:w,class:`${m}-base-slot-machine-number`},f.value!==null?K("span",{class:[`${m}-base-slot-machine-old-number ${m}-base-slot-machine-old-number--top`,p.value]},f.value):null,K("span",{class:[`${m}-base-slot-machine-current-number`,n.value]},K("span",{ref:"numberWrapper",class:[`${m}-base-slot-machine-current-number__inner`,typeof l.value!="number"&&`${m}-base-slot-machine-current-number__inner--not-number`]},V.value)),f.value!==null?K("span",{class:[`${m}-base-slot-machine-old-number ${m}-base-slot-machine-old-number--bottom`,p.value]},f.value):null)}}}),{cubicBezierEaseOut:_e}=xo;function wt({duration:l=".2s"}={}){return[ee("&.fade-up-width-expand-transition-leave-active",{transition:`
 opacity ${l} ${_e},
 max-width ${l} ${_e},
 transform ${l} ${_e}
 `}),ee("&.fade-up-width-expand-transition-enter-active",{transition:`
 opacity ${l} ${_e},
 max-width ${l} ${_e},
 transform ${l} ${_e}
 `}),ee("&.fade-up-width-expand-transition-enter-to",{opacity:1,transform:"translateX(0) translateY(0)"}),ee("&.fade-up-width-expand-transition-enter-from",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"}),ee("&.fade-up-width-expand-transition-leave-from",{opacity:1,transform:"translateY(0)"}),ee("&.fade-up-width-expand-transition-leave-to",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"})]}const $t=ee([ee("@keyframes n-base-slot-machine-fade-up-in",`
 from {
 transform: translateY(60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),ee("@keyframes n-base-slot-machine-fade-down-in",`
 from {
 transform: translateY(-60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),ee("@keyframes n-base-slot-machine-fade-up-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(-60%);
 opacity: 0;
 }
 `),ee("@keyframes n-base-slot-machine-fade-down-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(60%);
 opacity: 0;
 }
 `),ie("base-slot-machine",`
 overflow: hidden;
 white-space: nowrap;
 display: inline-block;
 height: 18px;
 line-height: 18px;
 `,[ie("base-slot-machine-number",`
 display: inline-block;
 position: relative;
 height: 18px;
 width: .6em;
 max-width: .6em;
 `,[wt({duration:".2s"}),So({duration:".2s",delay:"0s"}),ie("base-slot-machine-old-number",`
 display: inline-block;
 opacity: 0;
 position: absolute;
 left: 0;
 right: 0;
 `,[ae("top",{transform:"translateY(-100%)"}),ae("bottom",{transform:"translateY(100%)"}),ae("down-scroll",{animation:"n-base-slot-machine-fade-down-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ae("up-scroll",{animation:"n-base-slot-machine-fade-up-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1})]),ie("base-slot-machine-current-number",`
 display: inline-block;
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 1;
 transform: translateY(0);
 width: .6em;
 `,[ae("down-scroll",{animation:"n-base-slot-machine-fade-down-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ae("up-scroll",{animation:"n-base-slot-machine-fade-up-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),Vo("inner",`
 display: inline-block;
 position: absolute;
 right: 0;
 top: 0;
 width: .6em;
 `,[ae("not-number",`
 right: unset;
 left: 0;
 `)])])])])]),xt=G({name:"BaseSlotMachine",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],default:0},max:{type:Number,default:void 0},appeared:{type:Boolean,required:!0}},setup(l){no("-base-slot-machine",$t,Pe(l,"clsPrefix"));const w=N(),f=N(),V=te(()=>{if(typeof l.value=="string")return[];if(l.value<1)return[0];const a=[];let e=l.value;for(l.max!==void 0&&(e=Math.min(l.max,e));e>=1;)a.push(e%10),e/=10,e=Math.floor(e);return a.reverse(),a});return F(Pe(l,"value"),(a,e)=>{typeof a=="string"?(f.value=void 0,w.value=void 0):typeof e=="string"?(f.value=a,w.value=void 0):(f.value=a,w.value=e)}),()=>{const{value:a,clsPrefix:e}=l;return typeof a=="number"?K("span",{class:`${e}-base-slot-machine`},K(Bo,{name:"fade-up-width-expand-transition",tag:"span"},{default:()=>V.value.map((n,p)=>K(oo,{clsPrefix:e,key:V.value.length-p-1,oldOriginalNumber:w.value,newOriginalNumber:f.value,value:n}))}),K(Co,{key:"+",width:!0},{default:()=>l.max!==void 0&&l.max<a?K(oo,{clsPrefix:e,value:"+"}):null})):K("span",{class:`${e}-base-slot-machine`},a)}}}),St=l=>{const{errorColor:w,infoColor:f,successColor:V,warningColor:a,fontFamily:e}=l;return{color:w,colorInfo:f,colorSuccess:V,colorError:w,colorWarning:a,fontSize:"12px",fontFamily:e}},Vt={name:"Badge",common:To,self:St},Ct=ee([ee("@keyframes badge-wave-spread",{from:{boxShadow:"0 0 0.5px 0px var(--n-ripple-color)",opacity:.6},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)",opacity:0}}),ie("badge",`
 display: inline-flex;
 position: relative;
 vertical-align: middle;
 font-family: var(--n-font-family);
 `,[ae("as-is",[ie("badge-sup",{position:"static",transform:"translateX(0)"},[Ze({transformOrigin:"left bottom",originalTransform:"translateX(0)"})])]),ae("dot",[ie("badge-sup",`
 height: 8px;
 width: 8px;
 padding: 0;
 min-width: 8px;
 left: 100%;
 bottom: calc(100% - 4px);
 `,[ee("::before","border-radius: 4px;")])]),ie("badge-sup",`
 background: var(--n-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: #FFF;
 position: absolute;
 height: 18px;
 line-height: 18px;
 border-radius: 9px;
 padding: 0 6px;
 text-align: center;
 font-size: var(--n-font-size);
 transform: translateX(-50%);
 left: 100%;
 bottom: calc(100% - 9px);
 font-variant-numeric: tabular-nums;
 z-index: 1;
 display: flex;
 align-items: center;
 `,[Ze({transformOrigin:"left bottom",originalTransform:"translateX(-50%)"}),ie("base-wave",{zIndex:1,animationDuration:"2s",animationIterationCount:"infinite",animationDelay:"1s",animationTimingFunction:"var(--n-ripple-bezier)",animationName:"badge-wave-spread"}),ee("&::before",`
 opacity: 0;
 transform: scale(1);
 border-radius: 9px;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)])])]),Bt=Object.assign(Object.assign({},lo.props),{value:[String,Number],max:Number,dot:Boolean,type:{type:String,default:"default"},show:{type:Boolean,default:!0},showZero:Boolean,processing:Boolean,color:String,offset:Array}),De=G({name:"Badge",props:Bt,setup(l,{slots:w}){const{mergedClsPrefixRef:f,inlineThemeDisabled:V,mergedRtlRef:a}=to(l),e=lo("Badge","-badge",Ct,Vt,l,f),n=N(!1),p=()=>{n.value=!0},r=()=>{n.value=!1},_=te(()=>l.show&&(l.dot||l.value!==void 0&&!(!l.showZero&&Number(l.value)<=0)||!jo(w.value)));We(()=>{_.value&&(n.value=!0)});const m=Io("Badge",a,f),d=te(()=>{const{type:C,color:U}=l,{common:{cubicBezierEaseInOut:v,cubicBezierEaseOut:$},self:{[Uo("color",C)]:M,fontFamily:R,fontSize:O}}=e.value;return{"--n-font-size":O,"--n-font-family":R,"--n-color":U||M,"--n-ripple-color":U||M,"--n-bezier":v,"--n-ripple-bezier":$}}),b=V?Ro("badge",te(()=>{let C="";const{type:U,color:v}=l;return U&&(C+=U[0]),v&&(C+=Lo(v)),C}),d,l):void 0,y=te(()=>{const{offset:C}=l;if(!C)return;const[U,v]=C,$=typeof U=="number"?`${U}px`:U,M=typeof v=="number"?`${v}px`:v;return{transform:`translate(calc(${m!=null&&m.value?"50%":"-50%"} + ${$}), ${M})`}});return{rtlEnabled:m,mergedClsPrefix:f,appeared:n,showBadge:_,handleAfterEnter:p,handleAfterLeave:r,cssVars:V?void 0:d,themeClass:b==null?void 0:b.themeClass,onRender:b==null?void 0:b.onRender,offsetStyle:y}},render(){var l;const{mergedClsPrefix:w,onRender:f,themeClass:V,$slots:a}=this;f==null||f();const e=(l=a.default)===null||l===void 0?void 0:l.call(a);return K("div",{class:[`${w}-badge`,this.rtlEnabled&&`${w}-badge--rtl`,V,{[`${w}-badge--dot`]:this.dot,[`${w}-badge--as-is`]:!e}],style:this.cssVars},e,K(Do,{name:"fade-in-scale-up-transition",onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>this.showBadge?K("sup",{class:`${w}-badge-sup`,title:Eo(this.value),style:this.offsetStyle},zo(a.value,()=>[this.dot?null:K(xt,{clsPrefix:w,appeared:this.appeared,max:this.max,value:this.value})]),this.processing?K(Mo,{clsPrefix:w}):null):null}))}}),Tt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},jt=c("path",{fill:"currentColor",d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8"},null,-1),It=c("path",{fill:"currentColor",d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},null,-1),Ut=[jt,It];function Rt(l,w){return i(),j("svg",Tt,[...Ut])}const ho={name:"ant-design-plus-outlined",render:Rt},Lt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Dt=c("path",{fill:"currentColor",d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),Et=[Dt];function zt(l,w){return i(),j("svg",Lt,[...Et])}const Mt={name:"ant-design-minus-outlined",render:zt},Ot={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},At=c("path",{fill:"currentColor",d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4"},null,-1),qt=[At];function Pt(l,w){return i(),j("svg",Ot,[...qt])}const bo={name:"ant-design-right-outlined",render:Pt},Wt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Ft=c("path",{fill:"currentColor","fill-rule":"evenodd",d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.1.1 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.12.12 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.1.1 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926L224.297 857.629c-.04.041-.06.052-.083.059a.12.12 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.1.1 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512L166.371 224.297c-.041-.04-.052-.06-.059-.083a.12.12 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.1.1 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.12.12 0 0 1 .07 0Z"},null,-1),Yt=[Ft];function Ht(l,w){return i(),j("svg",Wt,[...Yt])}const Ge={name:"ant-design-close-outlined",render:Ht},Gt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Jt=c("path",{fill:"currentColor",d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6"},null,-1),Xt=[Jt];function Zt(l,w){return i(),j("svg",Gt,[...Xt])}const go={name:"ant-design-left-outlined",render:Zt},Kt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Qt=c("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372c0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884m288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372c0 89-31.3 170.8-83.5 234.8"},null,-1),en=[Qt];function on(l,w){return i(),j("svg",Kt,[...en])}const tn={name:"ant-design-stop-outlined",render:on},nn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},ln=c("path",{fill:"currentColor",d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9C912 303 733.5 124.3 512.6 124C291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2c3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1c-8.1-6.6-15.9-13.7-23.4-21.2a318.6 318.6 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7s63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6s52.5 63.6 68.6 101.7c16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.6 318.6 0 0 1-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 0 0-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9z"},null,-1),an=[ln];function sn(l,w){return i(),j("svg",nn,[...an])}const Je={name:"ant-design-redo-outlined",render:sn},dn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},un=c("path",{fill:"currentColor",d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9m67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32"},null,-1),rn=[un];function cn(l,w){return i(),j("svg",dn,[...rn])}const pn={name:"ant-design-edit-outlined",render:cn},mn={class:"flex items-center"},Ee=G({name:"EditableInput",__name:"editable-input",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=N(),e=N(),n=N(!1);F(()=>f.modelValue,_=>{e.value=_},{immediate:!0});const p=()=>{n.value=!0,re(()=>{var _;(_=a.value)==null||_.focus()})},r=()=>{V("update:modelValue",e.value),n.value=!1};return(_,m)=>{const d=Fe,b=pn,y=ne,C=Ie;return n.value?(i(),I(d,{key:0,ref_key:"inputRef",ref:a,value:e.value,"onUpdate:value":m[0]||(m[0]=U=>e.value=U),type:"text",onBlur:r},null,8,["value"])):(i(),I(C,{key:1},{default:t(()=>[c("span",mn,[B(x(e.value)+" ",1),o(y,{text:"",type:"info",class:"m-l-6px",onClick:p},{icon:t(()=>[o(b,{class:"text-icon"})]),_:1})])]),_:1}))}}}),fn={class:"w-460px flex-center"},vn=G({name:"TaskDrawer",__name:"task-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1},len:{default:0}},emits:["update:open","save"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=N(!1),n=N({}),p=N([]);F(()=>a.jobList,y=>{p.value=y},{immediate:!0,deep:!0}),F(()=>f.open,y=>{e.value=y},{immediate:!0}),F(()=>f.modelValue,y=>{n.value=y},{immediate:!0,deep:!0});const r=N(),_=()=>{V("update:open",!1),e.value=!1},m=()=>{var y;(y=r.value)==null||y.validate(C=>{C||(_(),V("save",n.value))}).catch(()=>{var C;return(C=window.$message)==null?void 0:C.warning("请检查表单信息")})},d={failStrategy:[{required:!0,message:"请选择失败策略"}],workflowNodeStatus:[{required:!0,message:"请选择工作流状态"}],jobTask:{jobId:[{required:!0,message:"请选择任务"}]}},b=(y,C)=>{n.value.jobTask.jobName=C.label};return(y,C)=>{const U=Se,v=Ue,$=Ve,M=Le,R=Ce,O=Re,H=ne,h=de,S=ue;return i(),I(S,{show:e.value,"onUpdate:show":C[5]||(C[5]=L=>e.value=L),"display-directive":"if",width:500,onAfterLeave:_},{default:t(()=>[o(h,null,{header:t(()=>[c("div",fn,[o(Ee,{modelValue:n.value.nodeName,"onUpdate:modelValue":C[0]||(C[0]=L=>n.value.nodeName=L),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),o(U,{value:n.value.priorityLevel,"onUpdate:value":C[1]||(C[1]=L=>n.value.priorityLevel=L),class:"max-w-110px",options:Array(y.len).fill(0).map((L,W)=>({label:"优先级 "+(W+1),value:W+1}))},null,8,["value","options"])])]),footer:t(()=>[o(H,{type:"primary",onClick:m},{default:t(()=>[B("保存")]),_:1}),o(H,{class:"ml-12px",onClick:_},{default:t(()=>[B("取消")]),_:1})]),default:t(()=>[o(O,{ref_key:"formRef",ref:r,model:n.value,rules:d,"label-align":"left","label-width":"100px"},{default:t(()=>[o(v,{path:"jobTask.jobId",label:"所属任务",placeholder:"请选择任务"},{default:t(()=>[o(U,{value:n.value.jobTask.jobId,"onUpdate:value":[C[2]||(C[2]=L=>n.value.jobTask.jobId=L),b],options:p.value.map(L=>({label:L.jobName,value:L.id}))},null,8,["value","options"])]),_:1}),o(v,{path:"failStrategy",label:"失败策略"},{default:t(()=>[o(R,{value:n.value.failStrategy,"onUpdate:value":C[3]||(C[3]=L=>n.value.failStrategy=L)},{default:t(()=>[o(M,null,{default:t(()=>[(i(!0),j(oe,null,se(s(Oo),(L,W)=>(i(),I($,{key:W,label:s(g)(L.label),value:L.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(v,{path:"workflowNodeStatus",label:"节点状态"},{default:t(()=>[o(R,{value:n.value.workflowNodeStatus,"onUpdate:value":C[4]||(C[4]=L=>n.value.workflowNodeStatus=L)},{default:t(()=>[o(M,null,{default:t(()=>[(i(!0),j(oe,null,se(s(Ye),(L,W)=>(i(),I($,{key:W,label:s(g)(L.label),value:L.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),_n=G({name:"TaskDetail",__name:"task-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=N(!1);F(()=>f.open,r=>{e.value=r},{immediate:!0});const n=()=>{V("update:open",!1)},p=r=>{var m;return(m=a.jobList.find(d=>d.id===r))==null?void 0:m.jobName};return(r,_)=>{const m=we,d=$e,b=de,y=ue;return i(),I(y,{show:e.value,"onUpdate:show":_[0]||(_[0]=C=>e.value=C),placement:"right",width:500,"display-directive":"if",onAfterLeave:n},{default:t(()=>[o(b,{title:"工作流详情"},{default:t(()=>[o(d,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(m,{label:"节点名称"},{default:t(()=>[B(x(r.modelValue.nodeName),1)]),_:1}),o(m,{label:"任务 ID"},{default:t(()=>{var C;return[B(x((C=r.modelValue.jobTask)==null?void 0:C.jobId),1)]}),_:1}),o(m,{label:"任务名称"},{default:t(()=>{var C;return[B(x(p((C=r.modelValue.jobTask)==null?void 0:C.jobId)),1)]}),_:1}),o(m,{label:"失败策略"},{default:t(()=>[B(x(s(g)(s(ao)[r.modelValue.failStrategy])),1)]),_:1}),o(m,{label:"工作流状态"},{default:t(()=>[B(x(s(g)(s(so)[r.modelValue.workflowNodeStatus])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),hn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},bn=c("path",{fill:"currentColor",d:"M168 504.2c1-43.7 10-86.1 26.9-126c17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 0 1 755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92C282.7 92 96.3 275.6 92 503.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8m756 7.8h-60c-4.4 0-7.9 3.5-8 7.8c-1 43.7-10 86.1-26.9 126c-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 0 1 512.1 856a342.24 342.24 0 0 1-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 0 0-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 0 0-8-8.2"},null,-1),gn=[bn];function Nn(l,w){return i(),j("svg",hn,[...gn])}const yn={name:"ant-design-sync-outlined",render:Nn},kn=pe(Ao,[["__scopeId","data-v-d1f834af"]]),wn=l=>(Ne("data-v-94ce09e3"),l=l(),ye(),l),$n=wn(()=>c("div",{class:"header-border"},[c("span",{class:"pl-12px"},"任务项列表")],-1));function xn(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!Ho(l)}const Sn=G({name:"DetailCard",__name:"detail-card",props:{id:{default:void 0},ids:{default:()=>[]},show:{type:Boolean,default:!1}},emits:["update:show"],setup(l,{emit:w}){const f=l,V=w,a=qo(),e=ce(),n=N(!1),p=N(!1),r=N(!1),_=N(!1),m=N(1),d=N({}),b=N([]),y=N({page:1,pageCount:0,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onUpdatePage:async u=>{y.value.page=u;const k=f.ids[m.value-1];v(k),$(k,u)},onUpdatePageSize:async u=>{y.value.pageSize=u;const k=f.ids[m.value-1];v(k),$(k,y.value.page)}});F(()=>f.show,u=>{n.value=u,u&&R()},{immediate:!0});const C=()=>{V("update:show",!1)};async function U(u){r.value=!0;const{data:k,error:E}=await Go(u);E||(d.value=k,r.value=!1)}async function v(u){r.value=!0;const{data:k,error:E}=await Po(u);E||(d.value=k,r.value=!1)}async function $(u,k=1){_.value=!0;const{data:E,error:D}=await Wo({groupName:e.groupName,taskBatchId:u??"0",page:k,pageSize:y.value.pageSize});D||(y.value.pageCount=E.total,b.value=E.data,_.value=!1)}const M=N([]);function R(){M.value=f.ids,re(()=>{f.ids.length>0?(v(f.ids[0]),$(f.ids[0])):f.id&&(M.value=[d.value.taskBatchId],U(f.id),$(d.value.taskBatchId))})}const O=N({}),H=u=>{O.value=u,p.value=!0},h=async u=>{var E;const{error:k}=await Jo(e.id,u.workflowNodeId);k||(E=window.$message)==null||E.success("执行重试成功")},S=u=>u===4||u===5||u===6,L=N([{key:"index",title:"日志",align:"center",width:64,render:u=>o(ne,{type:"info",text:!0,onClick:()=>H(u)},{default:()=>[o("span",{class:"w-28px ws-break-spaces"},[`查看
日志`])]})},{key:"id",title:g("snail.jobBatch.jobTask.id"),align:"left",minWidth:64},{key:"groupName",title:g("snail.jobBatch.jobTask.groupName"),align:"left",minWidth:120},{key:"taskStatus",title:g("snail.jobBatch.jobTask.taskStatus"),align:"left",minWidth:80,render:u=>{if(u.taskStatus===null)return;const k=g(Fo[u.taskStatus]);return o(be,{type:{1:"info",2:"info",3:"info",4:"error",5:"error",6:"error"}[u.taskStatus]},xn(k)?k:{default:()=>[k]})}},{key:"clientInfo",title:g("snail.jobBatch.jobTask.clientInfo"),align:"left",minWidth:120,render:u=>{var k;if(u.clientInfo){const E=(k=u.clientInfo)==null?void 0:k.split("@"),D=E.length>1?E[1]:"";return o("div",null,[D])}return o("div",null,[u.clientInfo])}},{key:"argsStr",title:g("snail.jobBatch.jobTask.argsStr"),align:"left",minWidth:120},{key:"resultMessage",title:g("snail.jobBatch.jobTask.resultMessage"),align:"left",minWidth:120},{key:"retryCount",title:g("snail.jobBatch.jobTask.retryCount"),align:"left",minWidth:64},{key:"createDt",title:g("snail.jobBatch.jobTask.createDt"),align:"left",minWidth:120}]);function W(u){return{color:`${u}18`,textColor:u,borderColor:`${u}58`}}const Q=u=>{m.value=u;const k=f.ids[u-1];v(k),$(k,u)};return(u,k)=>{const E=we,D=$e,z=io,A=yn,P=he,Z=Je,xe=mt,ze=Xo,Me=Zo,Oe=Ko,Ae=ft,qe=de,q=ue;return i(),j(oe,null,[o(q,{show:n.value,"onUpdate:show":[k[3]||(k[3]=Y=>n.value=Y),C],width:800,"display-directive":"if"},{default:t(()=>[o(qe,{title:"任务批次详情",closable:""},Yo({default:t(()=>[M.value&&M.value.length>0?(i(),I(Oe,{key:0,value:m.value,"onUpdate:value":k[1]||(k[1]=Y=>m.value=Y),type:"segment",animated:""},{default:t(()=>[(i(!0),j(oe,null,se(M.value,(Y,le)=>(i(),I(Me,{key:le,name:le+1,tab:Y},{default:t(()=>[o(z,{show:r.value},{default:t(()=>[o(D,{"label-placement":"left",bordered:"",column:2},{default:t(()=>[o(E,{label:s(g)("snail.jobBatch.groupName")},{default:t(()=>{var J;return[B(x((J=d.value)==null?void 0:J.groupName),1)]}),_:1},8,["label"]),o(E,{label:s(g)("snail.jobBatch.jobName")},{default:t(()=>{var J;return[B(x((J=d.value)==null?void 0:J.jobName),1)]}),_:1},8,["label"]),o(E,{label:s(g)("snail.jobBatch.taskBatchStatus")},{default:t(()=>[s(ge)(d.value.taskBatchStatus)?(i(),I(s(be),{key:0,color:W(s(X)[d.value.taskBatchStatus].color)},{default:t(()=>[B(x(s(X)[d.value.taskBatchStatus].title),1)]),_:1},8,["color"])):T("",!0),s(ge)(d.value.jobStatus)?(i(),I(s(be),{key:1,color:W(s(Ke)[d.value.jobStatus].color)},{default:t(()=>[B(x(s(g)(s(Ke)[d.value.jobStatus].name)),1)]),_:1},8,["color"])):T("",!0)]),_:1},8,["label"]),o(E,{label:s(g)("snail.jobBatch.executionAt")},{default:t(()=>{var J;return[B(x((J=d.value)==null?void 0:J.executionAt),1)]}),_:1},8,["label"]),o(E,{label:s(g)("snail.jobBatch.operationReason")},{default:t(()=>[s(ge)(d.value.operationReason)?(i(),I(s(be),{key:0,color:W(s(Qe)[d.value.operationReason].color)},{default:t(()=>[B(x(s(g)(s(Qe)[d.value.operationReason].name)),1)]),_:1},8,["color"])):T("",!0)]),_:1},8,["label"]),s(a).default?T("",!0):(i(),I(E,{key:0,label:s(g)("snail.jobBatch.executorType")},{default:t(()=>[s(ge)(d.value.executorType)?(i(),I(s(be),{key:0,color:W(s(eo)[d.value.executorType].color)},{default:t(()=>[B(x(s(g)(s(eo)[d.value.executorType].name)),1)]),_:1},8,["color"])):T("",!0)]),_:1},8,["label"])),o(E,{label:s(g)("snail.jobBatch.executorInfo"),span:2},{default:t(()=>{var J;return[B(x((J=d.value)==null?void 0:J.executorInfo),1)]}),_:1},8,["label"]),o(E,{label:s(g)("snail.jobBatch.createDt"),span:2},{default:t(()=>{var J;return[B(x((J=d.value)==null?void 0:J.createDt),1)]}),_:1},8,["label"])]),_:1})]),_:1},8,["show"]),Be(u.$slots,"default",{},void 0,!0),o(ze,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper","content-style":{padding:0},"header-style":{padding:0}},{header:t(()=>[$n]),"header-extra":t(()=>[o(P,{trigger:"hover"},{trigger:t(()=>[o(s(ne),{text:"",onClick:J=>$(Y)},{default:t(()=>[o(A,{class:"mr-16px text-20px font-bold"})]),_:2},1032,["onClick"])]),default:t(()=>[B(" 刷新 ")]),_:2},1024),S(d.value.taskBatchStatus)?(i(),I(P,{key:0,trigger:"hover"},{trigger:t(()=>[o(s(ne),{text:""},{default:t(()=>[o(Z,{class:"text-20px font-bold",onClick:k[0]||(k[0]=J=>h(d.value))})]),_:1})]),default:t(()=>[B(" 重试 ")]),_:1})):T("",!0)]),default:t(()=>[o(xe,{columns:L.value,data:b.value,loading:_.value,scroll:{x:1200},remote:"","row-key":J=>J.id,pagination:y.value,class:"sm:h-full"},null,8,["columns","data","loading","row-key","pagination"])]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value"])):T("",!0)]),_:2},[u.ids&&u.ids.length>1?{name:"footer",fn:t(()=>[o(Ae,{page:m.value,"onUpdate:page":[k[2]||(k[2]=Y=>m.value=Y),Q],class:"text-center","page-size":1,"page-count":u.ids.length},null,8,["page","page-count"])]),key:"0"}:void 0]),1024)]),_:3},8,["show"]),o(kn,{show:p.value,"onUpdate:show":k[4]||(k[4]=Y=>p.value=Y),title:"日志详情","task-data":O.value},null,8,["show","task-data"])],64)}}}),No=pe(Sn,[["__scopeId","data-v-94ce09e3"]]),Vn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Cn=c("path",{fill:"currentColor",d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8M872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),Bn=[Cn];function Tn(l,w){return i(),j("svg",Vn,[...Bn])}const jn={name:"ant-design-swap-outlined",render:Tn},In={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Un=c("path",{fill:"currentColor",d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.7 160.7 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120s-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3c0 66.2 53.8 120 120 120s120-53.8 120-120s-53.8-120-120-120m0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52s-52-23.3-52-52s23.3-52 52-52M312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88s-39.5 88-88 88m440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52s52 23.3 52 52s-23.3 52-52 52"},null,-1),Rn=[Un];function Ln(l,w){return i(),j("svg",In,[...Rn])}const Dn={name:"ant-design-share-alt-outlined",render:Ln},En={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},zn=c("path",{fill:"currentColor",d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8M104 228a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0"},null,-1),Mn=[zn];function On(l,w){return i(),j("svg",En,[...Mn])}const An={name:"ant-design-unordered-list-outlined",render:On},qn={class:"add-node-btn-box"},Pn={class:"add-node-btn"},Wn={class:"add-node-popover-body"},Fn={class:"icon"},Yn=G({name:"AddNode",__name:"add-node",props:{modelValue:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=e=>{let n={};e===1?n={nodeName:g("node.task.nodeName"),nodeType:1,conditionNodes:[{nodeName:g("node.task.conditionNodes.nodeName"),failStrategy:1,priorityLevel:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}],childNode:f.modelValue}:e===2?n={nodeName:g("node.condition.nodeName"),nodeType:2,conditionNodes:[{nodeName:`${g("node.condition.conditionNodes.nodeName")} 1`,priorityLevel:1,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}},{nodeName:g("node.condition.conditionNodes.otherNodeName"),priorityLevel:2,decision:{expressionType:1,nodeExpression:"#true",logicalCondition:1,defaultDecision:1}}],childNode:f.modelValue}:e===3&&(n={nodeName:g("node.callback.nodeName"),nodeType:3,conditionNodes:[{nodeName:g("node.callback.conditionNodes.nodeName"),workflowNodeStatus:1,callback:{webhook:void 0,contentType:void 0,secret:void 0}}],childNode:f.modelValue}),V("update:modelValue",n)};return(e,n)=>{const p=ho,r=ne,_=An,m=Dn,d=jn,b=He;return i(),j("div",qn,[c("div",Pn,[e.disabled?T("",!0):(i(),I(b,{key:0,placement:"right-end",trigger:"click","overlay-style":{width:"296px"}},{trigger:t(()=>[o(r,{type:"primary",circle:"",strong:""},{default:t(()=>[o(p)]),_:1})]),default:t(()=>[c("div",Wn,[c("ul",Fn,[c("li",null,[o(r,{circle:"",size:"large",onClick:n[0]||(n[0]=y=>a(1))},{default:t(()=>[o(_,{class:"text-20px color-#3296fa"})]),_:1}),c("p",null,x(s(g)("node.task.nodeName")),1)]),c("li",null,[o(r,{circle:"",size:"large",onClick:n[1]||(n[1]=y=>a(2))},{default:t(()=>[o(m,{class:"text-20px color-#15bc83"})]),_:1}),c("p",null,x(s(g)("node.condition.nodeName")),1)]),c("li",null,[o(r,{circle:"",size:"large",onClick:n[2]||(n[2]=y=>a(3))},{default:t(()=>[o(d,{class:"text-20px color-#935af6"})]),_:1}),c("p",null,x(s(g)("node.callback.nodeName")),1)])])])]),_:1}))])])}}}),fe=pe(Yn,[["__scopeId","data-v-01c7123e"]]),Hn=l=>(Ne("data-v-a8507aad"),l=l(),ye(),l),Gn={class:"node-wrap"},Jn={class:"branch-box"},Xn={class:"condition-node"},Zn={class:"condition-node-box"},Kn={class:"popover"},Qn={class:"popover-item"},el=["onClick"],ol=["onClick"],tl={class:"title"},nl={class:"text color-#3296fa"},ll={class:"priority-title"},al={class:"content min-h-72px"},sl={key:0,class:"placeholder"},il={class:"content_label"},dl={class:"content_label"},ul=Hn(()=>c("div",null,".........",-1)),rl=["onClick"],cl={key:1,class:"top-left-cover-line"},pl={key:2,class:"bottom-left-cover-line"},ml={key:3,class:"top-right-cover-line"},fl={key:4,class:"bottom-right-cover-line"},vl=G({name:"TaskNode",__name:"task-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=Qo(),n=N({});F(()=>f.modelValue,u=>{n.value=u},{immediate:!0,deep:!0});const p=()=>{var k;const u=n.value.conditionNodes.length+1;(k=n.value.conditionNodes)==null||k.push({nodeName:`${g("node.task.name")} ${u}`,priorityLevel:u,failStrategy:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}),V("update:modelValue",n.value)},r=(u,k)=>{u.childNode?r(u.childNode,k):u.childNode=k},_=u=>{var k;n.value.conditionNodes.length===1?(n.value.childNode&&(n.value.conditionNodes[0].childNode?r(n.value.conditionNodes[0].childNode,n.value.childNode):n.value.conditionNodes[0].childNode=n.value.childNode),re(()=>{V("update:modelValue",n.value.conditionNodes[0].childNode)})):(k=n.value.conditionNodes)==null||k.splice(u,1)},m=(u,k=1)=>{var E;n.value.conditionNodes[u]=n.value.conditionNodes.splice(u+k,1,n.value.conditionNodes[u])[0],(E=n.value.conditionNodes)==null||E.map((D,z)=>D.priorityLevel=z+1),V("update:modelValue",n.value)},d=N(0),b=N(!1),y=N({}),C=u=>{const k=n.value.conditionNodes[d.value].priorityLevel,E=u.priorityLevel;n.value.conditionNodes[d.value]=u,k!==E&&m(d.value,E-k),V("update:modelValue",n.value)},U=u=>{f.disabled||(d.value=u,y.value=JSON.parse(JSON.stringify(n.value.conditionNodes[u])),b.value=!0)},v=u=>f.disabled?a.type===2?`node-error node-error-${u.taskBatchStatus&&X[u.taskBatchStatus]?X[u.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover",$=N(),M=N(),R=N(!1),O=N([]),H=(u,k)=>{var E,D,z;M.value=[],a.type===2?((E=u.jobBatchList)==null||E.sort((A,P)=>A.taskBatchStatus-P.taskBatchStatus).forEach(A=>{var P;A.id?(P=M.value)==null||P.push(A.id):A.jobId&&($.value=A.jobId.toString())}),(D=u.jobTask)!=null&&D.jobId&&($.value=(z=u.jobTask)==null?void 0:z.jobId.toString()),R.value=!0):a.type===1?O.value[k]=!0:U(k)},h=async u=>{const{error:k}=await et(u.id,a.id);k||e.success(g("snail.form.executeMessage"))},S=async u=>{const{error:k}=await ot(u.id,a.id);k||e.success(g("snail.form.stopMessage"))},L=u=>u===4||u===5||u===6,W=u=>u===1||u===2,Q=u=>L(u)||W(u);return(u,k)=>{const E=ne,D=Je,z=uo,A=tn,P=go,Z=De,xe=Ge,ze=Ie,Me=bo,Oe=He,Ae=je,qe=he;return i(),j("div",Gn,[c("div",Jn,[u.disabled?T("",!0):(i(),I(E,{key:0,class:"add-branch",strong:"",type:"success",onClick:p},{default:t(()=>[B(x(s(g)("node.task.add")),1)]),_:1})),(i(!0),j(oe,null,se(n.value.conditionNodes,(q,Y)=>(i(),j("div",{key:Y,class:"col-box"},[c("div",Xn,[c("div",Zn,[o(Oe,{disabled:s(a).type!==2||!Q(q.taskBatchStatus)},{trigger:t(()=>{var le,J;return[c("div",{class:Te(["auto-judge cursor-pointer",v(q)]),onClick:ve=>H(q,Y)},[Y!=0?(i(),j("div",{key:0,class:"sort-left",onClick:me(ve=>m(Y,-1),["stop"])},[o(P)],8,ol)):T("",!0),c("div",tl,[c("span",nl,[o(Z,{processing:"",dot:"",color:q.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),B("  "+x(q.nodeName),1)]),c("span",ll,x(s(g)("node.priority"))+x(q.priorityLevel),1),u.disabled?T("",!0):(i(),I(xe,{key:0,class:"close",onClick:me(ve=>_(Y),["stop"])},null,8,["onClick"]))]),c("div",al,[(le=q.jobTask)!=null&&le.jobId?T("",!0):(i(),j("div",sl,x(s(g)("snail.form.taskTip")),1)),(J=q.jobTask)!=null&&J.jobId?(i(),j(oe,{key:1},[c("div",null,[c("span",il,x(s(g)("snail.taskName"))+": ",1),o(ze,{class:"max-w-123px"},{default:t(()=>{var ve,Xe;return[B(x(`${(ve=q.jobTask)==null?void 0:ve.jobName}(${(Xe=q.jobTask)==null?void 0:Xe.jobId})`),1)]}),_:2},1024)]),c("div",null,[c("span",dl,x(s(g)("snail.failStrategy"))+": ",1),B(" "+x(s(g)(s(ao)[q.failStrategy])),1)]),ul],64)):T("",!0)]),Y!=n.value.conditionNodes.length-1?(i(),j("div",{key:1,class:"sort-right",onClick:me(ve=>m(Y),["stop"])},[o(Me)],8,rl)):T("",!0)],10,el)]}),default:t(()=>[c("div",Kn,[L(q.taskBatchStatus)?(i(),I(E,{key:0,text:"",onClick:le=>h(q)},{default:t(()=>[c("span",Qn,[o(D,{class:"mb-3px text-24px font-bold"}),B(" "+x(s(g)("snail.retry")),1)])]),_:2},1032,["onClick"])):T("",!0),W(q.taskBatchStatus)&&L(q.taskBatchStatus)?(i(),I(z,{key:1,vertical:""})):T("",!0),W(q.taskBatchStatus)?(i(),I(E,{key:2,text:"",class:"popover-item",onClick:le=>S(q)},{default:t(()=>[o(A),c("span",null,x(s(g)("snail.stop")),1)]),_:2},1032,["onClick"])):T("",!0)])]),_:2},1032,["disabled"]),s(a).type===2&&q.taskBatchStatus?(i(),I(qe,{key:0},{trigger:t(()=>[c("div",{class:"task-error-tip text-24px",style:ke({color:s(X)[q.taskBatchStatus].color})},[o(Ae,{icon:s(X)[q.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[B(" "+x(s(X)[q.taskBatchStatus].title),1)]),_:2},1024)):T("",!0),o(fe,{modelValue:q.childNode,"onUpdate:modelValue":le=>q.childNode=le,disabled:u.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),q.childNode?Be(u.$slots,"default",{key:0,node:q},void 0,!0):T("",!0),Y==0?(i(),j("div",cl)):T("",!0),Y==0?(i(),j("div",pl)):T("",!0),Y==n.value.conditionNodes.length-1?(i(),j("div",ml)):T("",!0),Y==n.value.conditionNodes.length-1?(i(),j("div",fl)):T("",!0),s(a).type!==0?(i(),I(_n,{key:5,open:O.value[Y],"onUpdate:open":le=>O.value[Y]=le,"model-value":n.value.conditionNodes[Y]},null,8,["open","onUpdate:open","model-value"])):T("",!0)]))),128))]),n.value.conditionNodes.length>1?(i(),I(fe,{key:0,modelValue:n.value.childNode,"onUpdate:modelValue":k[0]||(k[0]=q=>n.value.childNode=q),disabled:u.disabled},null,8,["modelValue","disabled"])):T("",!0),s(a).type===0?(i(),I(vn,{key:1,open:b.value,"onUpdate:open":k[1]||(k[1]=q=>b.value=q),modelValue:y.value,"onUpdate:modelValue":k[2]||(k[2]=q=>y.value=q),len:n.value.conditionNodes.length,"onUpdate:len":k[3]||(k[3]=q=>n.value.conditionNodes.length=q),onSave:C},null,8,["open","modelValue","len"])):T("",!0),s(a).type!==0?(i(),I(No,{key:2,id:$.value,show:R.value,"onUpdate:show":k[4]||(k[4]=q=>R.value=q),ids:M.value},null,8,["id","show","ids"])):T("",!0)])}}}),_l=pe(vl,[["__scopeId","data-v-a8507aad"]]),hl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},bl=c("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372"},null,-1),gl=c("path",{fill:"currentColor",d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0m72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8"},null,-1),Nl=[bl,gl];function yl(l,w){return i(),j("svg",hl,[...Nl])}const kl={name:"ant-design-info-circle-outlined",render:yl},wl={class:"w-460px flex-center"},$l=G({name:"BranchDrawer",__name:"branch-drawer",props:{open:{type:Boolean,default:!1},len:{default:0},modelValue:{default:()=>({})}},emits:["update:open","save"],setup(l,{emit:w}){const f=l,V=w,a=N(!1),e=N({decision:{logicalCondition:1,expressionType:1}}),n=N({".cm-line":{fontSize:"18px"},".cm-scroller":{height:"500px",overflowY:"auto",overflowX:"hidden"}});F(()=>f.open,b=>{a.value=b},{immediate:!0}),F(()=>f.modelValue,b=>{e.value=b},{immediate:!0,deep:!0});const p=N(),r=()=>{V("update:open",!1),a.value=!1},_=()=>{var b;(b=p.value)==null||b.validate(y=>{y||(r(),V("save",e.value))}).catch(()=>{var y;return(y=window.$message)==null?void 0:y.warning("请检查表单信息")})},d={decision:{logicalCondition:[{required:!0,message:"请选择判定逻辑",trigger:"change",type:"number"}],expressionType:[{required:!0,message:"请选择表达式类型",trigger:"change",type:"number"}],nodeExpression:[{required:!0,validator:async()=>{var C;if(!((C=e.value.decision)!=null&&C.nodeExpression))return Promise.reject(new Error("请填写条件表达式"));const{error:b,data:y}=await lt(e.value.decision);return!b&&y.key!==1?Promise.reject(y.value??"请检查条件表达式"):Promise.resolve()},trigger:"blur"}]}};return(b,y)=>{const C=Se,U=Ve,v=Le,$=Ce,M=Ue,R=Re,O=ne,H=de,h=ue;return i(),I(h,{show:a.value,"onUpdate:show":y[5]||(y[5]=S=>a.value=S),"display-directive":"if",width:500,onAfterLeave:r},{default:t(()=>[o(H,null,{header:t(()=>[c("div",wl,[o(Ee,{modelValue:e.value.nodeName,"onUpdate:modelValue":y[0]||(y[0]=S=>e.value.nodeName=S),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),o(C,{value:e.value.priorityLevel,"onUpdate:value":y[1]||(y[1]=S=>e.value.priorityLevel=S),class:"max-w-110px",options:Array(b.len).fill(0).map((S,L)=>({label:"优先级 "+(L+1),value:L+1}))},null,8,["value","options"])])]),footer:t(()=>[o(O,{type:"primary",onClick:_},{default:t(()=>[B("保存")]),_:1}),o(O,{class:"ml-12px",onClick:r},{default:t(()=>[B("取消")]),_:1})]),default:t(()=>[o(R,{ref_key:"formRef",ref:p,rules:d,model:e.value,"label-align":"left","label-width":"100px"},{default:t(()=>[o(M,{path:"decision.logicalCondition",label:"判定逻辑"},{default:t(()=>[o($,{value:e.value.decision.logicalCondition,"onUpdate:value":y[2]||(y[2]=S=>e.value.decision.logicalCondition=S)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),j(oe,null,se(s(tt),S=>(i(),I(U,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"decision.expressionType",label:"表达式类型"},{default:t(()=>[o($,{value:e.value.decision.expressionType,"onUpdate:value":y[3]||(y[3]=S=>e.value.decision.expressionType=S)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),j(oe,null,se(s(nt),S=>(i(),I(U,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"decision.nodeExpression",label:"条件表达式"},{default:t(()=>[o(s(fo),{modelValue:e.value.decision.nodeExpression,"onUpdate:modelValue":y[4]||(y[4]=S=>e.value.decision.nodeExpression=S),class:"sj-code-mirror",theme:n.value,basic:"",lang:s(vo)(),extensions:[s(_o)]},null,8,["modelValue","theme","lang","extensions"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),xl=pe($l,[["__scopeId","data-v-f1c12d6f"]]),yo=G({name:"BranchDesc",__name:"branch-desc",props:{modelValue:{default:()=>({})}},setup(l){const w=l,f=N(""),V=N({".cm-line":{fontSize:"18px"},".cm-scroller":{height:"520px",overflowY:"auto",overflowX:"hidden"}}),a=()=>{var y;const e=document.getElementById("branch-desc"),n=e==null?void 0:e.querySelector(".n-descriptions-table"),p=n==null?void 0:n.querySelector("tbody"),r=document.createElement("tr");r.className="n-descriptions-table-row";const _=document.createElement("th");_.className="n-descriptions-table-header",_.innerHTML="条件表达式",_.setAttribute("colspan","4"),r.appendChild(_),p==null||p.insertBefore(r,p==null?void 0:p.childNodes[4]);const d=p.getElementsByClassName("n-descriptions-table-row")[3];(y=d.querySelector(".n-descriptions-table-header"))==null||y.remove();const b=d.querySelector(".n-descriptions-table-content");b.setAttribute("style","padding: 0"),b==null||b.setAttribute("colspan","4")};return We(()=>{var e;re(()=>{a()}),(e=w.modelValue.decision)!=null&&e.nodeExpression&&(f.value=w.modelValue.decision.nodeExpression)}),(e,n)=>{const p=we,r=$e;return i(),I(r,{id:"branch-desc",column:2,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(p,{label:"节点名称",span:2},{default:t(()=>[B(x(e.modelValue.nodeName),1)]),_:1}),o(p,{label:"判定逻辑"},{default:t(()=>{var _;return[B(x(s(ro)[(_=e.modelValue.decision)==null?void 0:_.logicalCondition]),1)]}),_:1}),o(p,{label:"表达式类型"},{default:t(()=>{var _;return[B(x(s(co)[(_=e.modelValue.decision)==null?void 0:_.expressionType]),1)]}),_:1}),o(p,{label:"条件表达式",span:2,"content-style":{padding:0}},{default:t(()=>[o(s(fo),{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=_=>f.value=_),readonly:"",disabled:"",theme:V.value,basic:"",lang:s(vo)(),extensions:[s(_o)]},null,8,["modelValue","theme","lang","extensions"])]),_:1})]),_:1})}}}),Sl=G({name:"BranchDetail",__name:"branch-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:w}){const f=l,V=w,a=N(!1),e=()=>{V("update:open",!1)};return F(()=>f.open,n=>{a.value=n},{immediate:!0}),(n,p)=>{const r=de,_=ue;return i(),I(_,{show:a.value,"onUpdate:show":p[0]||(p[0]=m=>a.value=m),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(r,{title:"决策详情"},{default:t(()=>[a.value?(i(),I(yo,{key:0,"model-value":n.modelValue},null,8,["model-value"])):T("",!0)]),_:1})]),_:1},8,["show"])}}}),Vl=l=>(Ne("data-v-1fd22218"),l=l(),ye(),l),Cl={class:"branch-wrap"},Bl={class:"branch-box-wrap"},Tl={class:"branch-box"},jl={class:"condition-node"},Il={class:"condition-node-box"},Ul=["onClick"],Rl=["onClick"],Ll={class:"title"},Dl={class:"node-title"},El={class:"priority-title"},zl={class:"content"},Ml=["innerHTML"],Ol={key:1,class:"placeholder"},Al=["onClick"],ql={key:1,class:"top-left-cover-line"},Pl={key:2,class:"bottom-left-cover-line"},Wl={key:3,class:"top-right-cover-line"},Fl={key:4,class:"bottom-right-cover-line"},Yl=Vl(()=>c("div",{class:"header-border"},[c("span",{class:"pl-12px"},"决策节点详情")],-1)),Hl=G({name:"BranchNode",__name:"branch-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=N({});F(()=>f.modelValue,h=>{e.value=h},{immediate:!0,deep:!0});const n=()=>{const h=e.value.conditionNodes.length;e.value.conditionNodes.splice(-1,0,{nodeName:`${g("node.condition.nodeName")} ${h}`,priorityLevel:h,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}}),e.value.conditionNodes[h].priorityLevel=h+1},p=(h,S)=>{h.childNode?p(h.childNode,S):h.childNode=S},r=h=>{var S;(S=e.value.conditionNodes)==null||S.splice(h,1),e.value.conditionNodes.length===1&&(e.value.childNode&&(e.value.conditionNodes[0].childNode?p(e.value.conditionNodes[0].childNode,e.value.childNode):e.value.conditionNodes[0].childNode=e.value.childNode),re(()=>{V("update:modelValue",e.value.conditionNodes[0].childNode)}))},_=(h,S=1)=>{var L;e.value.conditionNodes[h]=e.value.conditionNodes.splice(h+S,1,e.value.conditionNodes[h])[0],(L=e.value.conditionNodes)==null||L.map((W,Q)=>W.priorityLevel=Q+1),V("update:modelValue",e.value)},m=(h,S)=>{const{nodeName:L,decision:W}=h.conditionNodes[S],{logicalCondition:Q,expressionType:u,nodeExpression:k}=W;return k?L!==g("node.condition.conditionNodes.otherNodeName")?`<span class="content_label">${g("node.condition.conditionNodes.logicalCondition")}: </span>${ro[Q]}
<span class="content_label">${g("node.condition.conditionNodes.expressionType")}: </span>${co[u]}
<span class="content_label">${g("node.condition.conditionNodes.nodeExpression")}: </span><span style="display: inline-block; vertical-align: bottom; width: 120px; overflow: hidden; text-overflow: ellipsis">${k}<span/>`:g("node.condition.conditionNodes.otherNodeTip"):L===g("node.condition.conditionNodes.otherNodeName")?g("node.condition.conditionNodes.otherNodeTip"):null},d=N(0),b=N(!1),y=N([]),C=N({}),U=h=>{const S=e.value.conditionNodes[d.value].priorityLevel,L=h.priorityLevel;e.value.conditionNodes[d.value]=h,S!==L&&_(d.value,L-S),V("update:modelValue",e.value)},v=h=>{!f.disabled&&h!==e.value.conditionNodes.length-1?(d.value=h,C.value=JSON.parse(JSON.stringify(e.value.conditionNodes[h])),b.value=!0):a.type!==0&&(y.value[h]=!0)},$=N([]),M=N(""),R=N([]),O=(h,S)=>{var L;if(R.value=[],h.nodeName!==g("node.condition.conditionNodes.otherNodeName"))if(a.type===2){if((L=h.jobBatchList)==null||L.forEach(W=>{var Q;W.id?(Q=R.value)==null||Q.push(W.id):W.jobId&&(M.value=W.jobId.toString())}),R.value.length===0){y.value[S]=!0;return}$.value[S]=!0}else a.type===1?y.value[S]=!0:v(S)},H=h=>f.disabled?a.type===2?h.nodeName===g("node.condition.conditionNodes.otherNodeName")?`node-disabled node-error node-error-${h.taskBatchStatus?X[h.taskBatchStatus].name:"default"}`:`node-error node-error-${h.taskBatchStatus?X[h.taskBatchStatus].name:"default"}`:h.nodeName===g("node.condition.conditionNodes.otherNodeName")?"node-disabled":"node-error":h.nodeName===g("node.condition.conditionNodes.otherNodeName")?"node-disabled":"auto-judge-def auto-judge-hover";return(h,S)=>{const L=ne,W=go,Q=De,u=kl,k=he,E=Ge,D=bo,z=je;return i(),j("div",Cl,[c("div",Bl,[c("div",Tl,[h.disabled?T("",!0):(i(),I(L,{key:0,strong:"",type:"success",class:"add-branch",onClick:n},{default:t(()=>[B(x(s(g)("node.condition.addBranch")),1)]),_:1})),(i(!0),j(oe,null,se(e.value.conditionNodes,(A,P)=>(i(),j("div",{key:P,class:"col-box"},[c("div",jl,[c("div",Il,[c("div",{class:Te(["auto-judge",H(A)]),onClick:Z=>O(A,P)},[P!==0?(i(),j("div",{key:0,class:"sort-left",onClick:me(Z=>_(P,-1),["stop"])},[o(W)],8,Rl)):T("",!0),c("div",Ll,[c("span",Dl,[o(Q,{dot:"",processing:"",color:"#52c41a"}),B(" "+x(A.nodeName)+" ",1),A.nodeName===s(g)("node.condition.conditionNodes.otherNodeName")?(i(),I(k,{key:0},{trigger:t(()=>[o(u,{class:"ml-3px text-16px"})]),default:t(()=>[B(" "+x(s(g)("node.condition.conditionNodes.otherTip")),1)]),_:1})):T("",!0)]),c("span",El,x(s(g)("node.condition.conditionNodes.priority"))+x(A.priorityLevel),1),h.disabled?T("",!0):(i(),I(E,{key:0,class:"close",onClick:me(Z=>r(P),["stop"])},null,8,["onClick"]))]),c("div",zl,[m(e.value,P)?(i(),j("span",{key:0,innerHTML:m(e.value,P)},null,8,Ml)):(i(),j("span",Ol,x(s(g)("node.condition.conditionNodes.conditionTip")),1))]),P!==e.value.conditionNodes.length-2?(i(),j("div",{key:1,class:"sort-right",onClick:me(Z=>_(P),["stop"])},[o(D)],8,Al)):T("",!0),s(a).type===2&&A.taskBatchStatus?(i(),I(k,{key:2},{trigger:t(()=>[c("div",{class:"error-tip text-24px",style:ke({color:s(X)[A.taskBatchStatus].color})},[o(z,{icon:s(X)[A.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[B(" "+x(s(X)[A.taskBatchStatus].title),1)]),_:2},1024)):T("",!0)],10,Ul),o(fe,{modelValue:A.childNode,"onUpdate:modelValue":Z=>A.childNode=Z,disabled:h.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),A.childNode?Be(h.$slots,"default",{key:0,node:A},void 0,!0):T("",!0),P==0?(i(),j("div",ql)):T("",!0),P==0?(i(),j("div",Pl)):T("",!0),P==e.value.conditionNodes.length-1?(i(),j("div",Wl)):T("",!0),P==e.value.conditionNodes.length-1?(i(),j("div",Fl)):T("",!0),o(Sl,{open:y.value[P],"onUpdate:open":Z=>y.value[P]=Z,modelValue:e.value.conditionNodes[P],"onUpdate:modelValue":Z=>e.value.conditionNodes[P]=Z},null,8,["open","onUpdate:open","modelValue","onUpdate:modelValue"]),o(No,{id:M.value,show:$.value[P],"onUpdate:show":Z=>$.value[P]=Z,ids:R.value},{default:t(()=>[Yl,o(yo,{"model-value":e.value.conditionNodes[P]},null,8,["model-value"])]),_:2},1032,["id","show","onUpdate:show","ids"])]))),128))]),o(fe,{modelValue:e.value.childNode,"onUpdate:modelValue":S[0]||(S[0]=A=>e.value.childNode=A),disabled:h.disabled},null,8,["modelValue","disabled"])]),o(xl,{open:b.value,"onUpdate:open":S[1]||(S[1]=A=>b.value=A),modelValue:C.value,"onUpdate:modelValue":S[2]||(S[2]=A=>C.value=A),len:e.value.conditionNodes.length,"onUpdate:len":S[3]||(S[3]=A=>e.value.conditionNodes.length=A),onSave:U},null,8,["open","modelValue","len"])])}}}),Gl=pe(Hl,[["__scopeId","data-v-1fd22218"]]),Jl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Xl=c("path",{fill:"currentColor",d:"M112 476h160v72H112zm320 0h160v72H432zm320 0h160v72H752z"},null,-1),Zl=[Xl];function Kl(l,w){return i(),j("svg",Jl,[...Zl])}const Ql={name:"ant-design-dash-outlined",render:Kl},ea={class:"w-460px flex-center"},oa=G({name:"CallbackDrawer",__name:"callback-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1},len:{default:0}},emits:["update:open","save"],setup(l,{emit:w}){const f=l,V=w,a=N(!1),e=N({});F(()=>f.open,m=>{a.value=m},{immediate:!0}),F(()=>f.modelValue,m=>{e.value=m},{immediate:!0,deep:!0});const n=N(),p=()=>{V("update:open",!1),a.value=!1},r=()=>{var m;(m=n.value)==null||m.validate(d=>{d||(p(),V("save",e.value))}).catch(()=>{var d;return(d=window.$message)==null?void 0:d.warning("请检查表单信息")})},_={workflowNodeStatus:[{required:!0,message:"请选择工作流状态",trigger:"change"}],callback:{webhook:[{required:!0,message:"请输入 webhook",trigger:"change"}],contentType:[{required:!0,message:"请选择请求类型",trigger:"change",type:"number"}],secret:[{required:!0,message:"请输入秘钥",trigger:"change"}]}};return(m,d)=>{const b=Fe,y=Ue,C=Se,U=Ve,v=Le,$=Ce,M=Re,R=ne,O=de,H=ue;return i(),I(H,{show:a.value,"onUpdate:show":d[5]||(d[5]=h=>a.value=h),"display-directive":"if",width:500,onAfterLeave:p},{default:t(()=>[o(O,null,{header:t(()=>[c("div",ea,[o(Ee,{modelValue:e.value.nodeName,"onUpdate:modelValue":d[0]||(d[0]=h=>e.value.nodeName=h),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"])])]),footer:t(()=>[o(R,{type:"primary",onClick:r},{default:t(()=>[B("保存")]),_:1}),o(R,{class:"ml-12px",onClick:p},{default:t(()=>[B("取消")]),_:1})]),default:t(()=>[o(M,{ref_key:"formRef",ref:n,model:e.value,rules:_,"label-align":"left","label-width":"100px"},{default:t(()=>[o(y,{path:"callback.webhook",label:"webhook"},{default:t(()=>[o(b,{value:e.value.callback.webhook,"onUpdate:value":d[1]||(d[1]=h=>e.value.callback.webhook=h),placeholder:"请输入 webhook"},null,8,["value"])]),_:1}),o(y,{path:"callback.contentType",label:"请求类型"},{default:t(()=>[o(C,{value:e.value.callback.contentType,"onUpdate:value":d[2]||(d[2]=h=>e.value.callback.contentType=h),options:s(at),placeholder:"请选择请求类型"},null,8,["value","options"])]),_:1}),o(y,{path:"callback.secret",label:"秘钥"},{default:t(()=>[o(b,{value:e.value.callback.secret,"onUpdate:value":d[3]||(d[3]=h=>e.value.callback.secret=h),placeholder:"请输入秘钥"},null,8,["value"])]),_:1}),o(y,{name:"workflowNodeStatus",label:"工作流状态",rules:[{required:!0,message:"请选择工作流状态",trigger:"change"}]},{default:t(()=>[o($,{value:e.value.workflowNodeStatus,"onUpdate:value":d[4]||(d[4]=h=>e.value.workflowNodeStatus=h)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),j(oe,null,se(s(Ye),(h,S)=>(i(),I(U,{key:S,label:s(g)(h.label),value:h.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),ta=G({name:"CallbackDetail",__name:"callback-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:w}){const f=l,V=w,a=N(!1);F(()=>f.open,n=>{a.value=n},{immediate:!0});const e=()=>{V("update:open",!1)};return(n,p)=>{const r=we,_=$e,m=de,d=ue;return i(),I(d,{show:a.value,"onUpdate:show":p[0]||(p[0]=b=>a.value=b),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(m,{title:"工作流详情"},{default:t(()=>[o(_,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(r,{label:"节点名称"},{default:t(()=>[B(x(n.modelValue.nodeName),1)]),_:1}),o(r,{label:"webhook"},{default:t(()=>{var b;return[B(x((b=n.modelValue.callback)==null?void 0:b.webhook),1)]}),_:1}),o(r,{label:"请求类型"},{default:t(()=>{var b;return[B(x(s(po)[(b=n.modelValue.callback)==null?void 0:b.contentType]),1)]}),_:1}),o(r,{label:"密钥"},{default:t(()=>{var b;return[B(x((b=n.modelValue.callback)==null?void 0:b.secret),1)]}),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),ko=l=>(Ne("data-v-788c9e6c"),l=l(),ye(),l),na={class:"node-wrap"},la={class:"branch-box"},aa={class:"condition-node min-h-230px"},sa={class:"condition-node-box pt-0px"},ia={class:"popover"},da={class:"popover-item"},ua={class:"popover-item"},ra=["onClick"],ca={class:"title"},pa={class:"text text-#935af6"},ma={class:"content min-h-81px"},fa={key:0,class:"placeholder"},va={class:"flex justify-between"},_a=ko(()=>c("span",{class:"content_label"},"Webhook:",-1)),ha={class:"content_label"},ba=ko(()=>c("div",null,".........",-1)),ga={key:1,class:"top-left-cover-line"},Na={key:2,class:"bottom-left-cover-line"},ya={key:3,class:"top-right-cover-line"},ka={key:4,class:"bottom-right-cover-line"},wa=G({name:"CallbackNode",__name:"callback-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=N({});F(()=>f.modelValue,R=>{e.value=R},{immediate:!0,deep:!0});const n=(R,O)=>{R.childNode?n(R.childNode,O):R.childNode=O},p=()=>{e.value.childNode&&(e.value.conditionNodes[0].childNode?n(e.value.conditionNodes[0].childNode,e.value.childNode):e.value.conditionNodes[0].childNode=e.value.childNode),re(()=>{V("update:modelValue",e.value.conditionNodes[0].childNode)})},r=N(0),_=N(!1),m=N(!1),d=N({}),b=R=>{e.value.conditionNodes[r.value]=R,V("update:modelValue",e.value)},y=R=>{a.type===0?(r.value=R,d.value=JSON.parse(JSON.stringify(e.value.conditionNodes[R])),_.value=!0):m.value=!0},C=N(!1),U=N(""),v=N([]),$=(R,O)=>{var H;if(v.value=[],a.type===2){if((H=R.jobBatchList)==null||H.forEach(h=>{var S;h.id?(S=v.value)==null||S.push(h.id):h.jobId&&(U.value=h.jobId.toString())}),v.value.length===0){m.value=!0;return}C.value=!0}else a.type===1?m.value=!0:y(O)},M=R=>f.disabled?a.type===2?`node-error node-error-${R.taskBatchStatus?X[R.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover";return(R,O)=>{const H=Je,h=ne,S=uo,L=Ql,W=De,Q=Ge,u=Ie,k=je,E=he,D=He;return i(),j("div",na,[c("div",la,[(i(!0),j(oe,null,se(e.value.conditionNodes,(z,A)=>(i(),j("div",{key:A,class:"col-box"},[c("div",aa,[c("div",sa,[o(D,{disabled:s(a).type!==2||!0},{trigger:t(()=>{var P,Z;return[c("div",{class:Te(["auto-judge",M(z)]),onClick:xe=>$(z,A)},[c("div",ca,[c("span",pa,[o(W,{processing:"",dot:"",color:z.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),B(" "+x(z.nodeName),1)]),R.disabled?T("",!0):(i(),I(Q,{key:0,class:"close",onClick:me(p,["stop"])}))]),c("div",ma,[(P=z.callback)!=null&&P.webhook?T("",!0):(i(),j("div",fa,x(s(g)("node.callback.conditionNodes.webhookTip")),1)),(Z=z.callback)!=null&&Z.webhook?(i(),j(oe,{key:1},[c("div",va,[_a,o(u,{class:"w-116px"},{default:t(()=>[B(x(z.callback.webhook),1)]),_:2},1024)]),c("div",null,[c("span",ha,x(s(g)("node.callback.conditionNodes.contentType"))+":",1),B(" "+x(s(po)[z.callback.contentType]),1)]),ba],64)):T("",!0)]),s(a).type===2&&z.taskBatchStatus?(i(),I(E,{key:0},{trigger:t(()=>[c("div",{class:"error-tip text-24px",style:ke({color:s(X)[z.taskBatchStatus].color})},[o(k,{icon:s(X)[z.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[B(" "+x(s(X)[z.taskBatchStatus].title),1)]),_:2},1024)):T("",!0)],10,ra)]}),default:t(()=>[c("div",ia,[o(h,{text:""},{default:t(()=>[c("span",da,[o(H,{class:"mb-3px text-24px font-bold"}),B(" "+x(s(g)("snail.retry")),1)])]),_:1}),o(S,{vertical:""}),o(h,{text:""},{default:t(()=>[c("span",ua,[o(L,{class:"mb-3px text-24px font-bold"}),c("span",null,x(s(g)("snail.ignore")),1)])]),_:1})])]),_:2},1032,["disabled"]),o(fe,{modelValue:z.childNode,"onUpdate:modelValue":P=>z.childNode=P,disabled:R.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),z.childNode?Be(R.$slots,"default",{key:0,node:z},void 0,!0):T("",!0),A==0?(i(),j("div",ga)):T("",!0),A==0?(i(),j("div",Na)):T("",!0),A==e.value.conditionNodes.length-1?(i(),j("div",ya)):T("",!0),A==e.value.conditionNodes.length-1?(i(),j("div",ka)):T("",!0)]))),128))]),e.value.conditionNodes.length>1?(i(),I(fe,{key:0,modelValue:e.value.childNode,"onUpdate:modelValue":O[0]||(O[0]=z=>e.value.childNode=z),disabled:R.disabled},null,8,["modelValue","disabled"])):T("",!0),s(a).type!==0?(i(),I(ta,{key:1,open:m.value,"onUpdate:open":O[1]||(O[1]=z=>m.value=z),modelValue:e.value.conditionNodes[0],"onUpdate:modelValue":O[2]||(O[2]=z=>e.value.conditionNodes[0]=z)},null,8,["open","modelValue"])):T("",!0),o(oa,{open:_.value,"onUpdate:open":O[3]||(O[3]=z=>_.value=z),modelValue:d.value,"onUpdate:modelValue":O[4]||(O[4]=z=>d.value=z),onSave:b},null,8,["open","modelValue"])])}}}),$a=pe(wa,[["__scopeId","data-v-788c9e6c"]]),xa=G({name:"NodeWrap",__name:"node-wrap",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=N({});return F(()=>f.modelValue,e=>{a.value=e},{immediate:!0,deep:!0}),F(()=>a.value,e=>{V("update:modelValue",e)}),(e,n)=>{const p=st("NodeWrap",!0);return i(),j(oe,null,[a.value.nodeType==1?(i(),I(_l,{key:0,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value=r),disabled:e.disabled},{default:t(r=>[r.node?(i(),I(p,{key:0,modelValue:r.node.childNode,"onUpdate:modelValue":_=>r.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):T("",!0)]),_:1},8,["modelValue","disabled"])):T("",!0),a.value.nodeType==2?(i(),I(Gl,{key:1,modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=r=>a.value=r),disabled:e.disabled},{default:t(r=>[r.node?(i(),I(p,{key:0,modelValue:r.node.childNode,"onUpdate:modelValue":_=>r.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):T("",!0)]),_:1},8,["modelValue","disabled"])):T("",!0),a.value.nodeType==3?(i(),I($a,{key:2,modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=r=>a.value=r),disabled:e.disabled},{default:t(r=>[r.node?(i(),I(p,{key:0,modelValue:r.node.childNode,"onUpdate:modelValue":_=>r.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):T("",!0)]),_:1},8,["modelValue","disabled"])):T("",!0),a.value.childNode?(i(),I(p,{key:3,modelValue:a.value.childNode,"onUpdate:modelValue":n[3]||(n[3]=r=>a.value.childNode=r),disabled:e.disabled},null,8,["modelValue","disabled"])):T("",!0)],64)}}}),Sa=G({name:"StartDetail",__name:"start-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:w}){const f=l,V=w,a=N(!1);F(()=>f.open,n=>{a.value=n},{immediate:!0});const e=()=>{V("update:open",!1)};return(n,p)=>{const r=we,_=$e,m=de,d=ue;return i(),I(d,{show:a.value,"onUpdate:show":p[0]||(p[0]=b=>a.value=b),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(m,{title:"工作流详情"},{default:t(()=>[o(_,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(r,{label:"工作流名称"},{default:t(()=>[B(x(n.modelValue.workflowName),1)]),_:1}),o(r,{label:"组名称"},{default:t(()=>[B(x(n.modelValue.groupName),1)]),_:1}),o(r,{label:"触发类型"},{default:t(()=>[B(x(s(g)(s(it)[n.modelValue.triggerType])),1)]),_:1}),o(r,{label:"触发间隔"},{default:t(()=>[B(x(n.modelValue.triggerInterval)+" "+x(n.modelValue.triggerType===2?"秒":null),1)]),_:1}),o(r,{label:"执行超时时间"},{default:t(()=>[B(x(n.modelValue.executorTimeout)+" 秒",1)]),_:1}),o(r,{label:"阻塞策略"},{default:t(()=>[B(x(s(g)(s(mo)[n.modelValue.blockStrategy])),1)]),_:1}),o(r,{label:"工作流状态"},{default:t(()=>[B(x(s(g)(s(so)[n.modelValue.workflowStatus])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Va=G({name:"StartDrawer",__name:"start-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open","save"],setup(l,{emit:w}){const f=l,V=w,a=ce();let e="";const n=N(!1),p=N({}),r=N([]);F(()=>f.open,U=>{n.value=U},{immediate:!0}),F(()=>f.modelValue,U=>{p.value=U,U.triggerType===2&&(p.value.triggerInterval=Number(U.triggerInterval)),U.workflowName?e=U.workflowName:U.groupName?e=U.groupName:e="请选择组"},{immediate:!0,deep:!0});const _=N(),m=()=>{V("update:open",!1),n.value=!1},d=()=>{var U;(U=_.value)==null||U.validate(v=>{v||(m(),V("save",p.value))}).catch(()=>{var v;return(v=window.$message)==null?void 0:v.warning("请检查表单信息")})};(async()=>{const{data:U,error:v}=await ct();v||(r.value=U)})();const y=U=>{U===1?p.value.triggerInterval="* * * * * ?":U===2&&(p.value.triggerInterval=60)},C={groupName:{required:!0,message:"请选择组"},triggerType:{required:!0,message:"请选择触发类型"},triggerInterval:{required:!0,message:"请输入触发间隔"},executorTimeout:{required:!0,message:"请输入执行超时时间"},blockStrategy:{required:!0,message:"请选择阻塞策略"},workflowStatus:{required:!0,message:"请选择工作流状态"}};return(U,v)=>{const $=Se,M=Ue,R=vt,O=pt,H=_t,h=Ve,S=Le,L=Ce,W=Fe,Q=Re,u=ne,k=de,E=ue;return i(),I(E,{show:n.value,"onUpdate:show":v[9]||(v[9]=D=>n.value=D),"display-directive":"if",width:610,onAfterLeave:m},{default:t(()=>[o(k,{title:s(e)},{header:t(()=>[o(Ee,{modelValue:p.value.workflowName,"onUpdate:modelValue":v[0]||(v[0]=D=>p.value.workflowName=D),class:"max-w-570px min-w-570px"},null,8,["modelValue"])]),footer:t(()=>[o(u,{type:"primary",onClick:d},{default:t(()=>[B("保存")]),_:1}),o(u,{class:"ml-12px",onClick:m},{default:t(()=>[B("取消")]),_:1})]),default:t(()=>[o(Q,{ref_key:"formRef",ref:_,model:p.value,rules:C,"label-align":"left","label-width":"100px"},{default:t(()=>[o(M,{path:"groupName",label:"组名称"},{default:t(()=>[o($,{value:p.value.groupName,"onUpdate:value":v[1]||(v[1]=D=>p.value.groupName=D),placeholder:"请选择组",disabled:s(a).type===0&&s(ge)(s(a).id),options:r.value.map(D=>({label:D,value:D}))},null,8,["value","disabled","options"])]),_:1}),o(H,{cols:24,"x-gap":"20"},{default:t(()=>[o(R,{span:8},{default:t(()=>[o(M,{path:"triggerType",label:"触发类型"},{default:t(()=>[o($,{value:p.value.triggerType,"onUpdate:value":[v[2]||(v[2]=D=>p.value.triggerType=D),y],placeholder:"请选择触发类型",options:s(dt).map(D=>({label:s(g)(D.label),value:D.value}))},null,8,["value","options"])]),_:1})]),_:1}),o(R,{span:16},{default:t(()=>[o(M,{path:"triggerInterval",label:"触发间隔"},{default:t(()=>[p.value.triggerType===3?(i(),I(s(ut),{key:0,value:p.value.triggerInterval,"onUpdate:value":v[3]||(v[3]=D=>p.value.triggerInterval=D),placeholder:"请输入Cron表达式"},null,8,["value"])):(i(),I(O,{key:1,value:p.value.triggerInterval,"onUpdate:value":v[4]||(v[4]=D=>p.value.triggerInterval=D),class:"w-full",placeholder:"请输入触发间隔"},{suffix:t(()=>[B("秒")]),_:1},8,["value"]))]),_:1})]),_:1})]),_:1}),o(H,{cols:24,"x-gap":"20"},{default:t(()=>[o(R,{span:8},{default:t(()=>[o(M,{path:"executorTimeout",label:"执行超时时间"},{default:t(()=>[o(O,{value:p.value.executorTimeout,"onUpdate:value":v[5]||(v[5]=D=>p.value.executorTimeout=D),placeholder:"请输入超时时间"},{suffix:t(()=>[B("秒")]),_:1},8,["value"])]),_:1})]),_:1}),o(R,{span:16},{default:t(()=>[o(M,{path:"blockStrategy",label:"阻塞策略"},{default:t(()=>[o(L,{value:p.value.blockStrategy,"onUpdate:value":v[6]||(v[6]=D=>p.value.blockStrategy=D)},{default:t(()=>[o(S,null,{default:t(()=>[(i(!0),j(oe,null,se(s(rt),(D,z)=>(i(),I(h,{key:z,label:s(g)(D.label),value:D.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),o(M,{path:"workflowStatus",label:"节点状态"},{default:t(()=>[o(L,{value:p.value.workflowStatus,"onUpdate:value":v[7]||(v[7]=D=>p.value.workflowStatus=D)},{default:t(()=>[o(S,null,{default:t(()=>[(i(!0),j(oe,null,se(s(Ye),(D,z)=>(i(),I(h,{key:z,label:s(g)(D.label),value:D.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"description",label:"描述"},{default:t(()=>[o(W,{value:p.value.description,"onUpdate:value":v[8]||(v[8]=D=>p.value.description=D),type:"textarea",autosize:{minRows:5},placeholder:"请输入描述"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Ca=l=>(Ne("data-v-58e1938e"),l=l(),ye(),l),Ba={class:"node-wrap"},Ta={class:"title"},ja={class:"text text-#ff943e"},Ia={key:0,class:"content"},Ua={class:"content_label"},Ra={class:"content_label"},La=Ca(()=>c("div",null,".........",-1)),Da={key:1,class:"content min-h-85px"},Ea={class:"placeholder"},za=G({name:"StartNode",__name:"start-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:w}){const f=l,V=w,a=ce(),e=N({}),n=N({});F(()=>f.modelValue,d=>{n.value=d},{immediate:!0,deep:!0}),F(()=>n.value,d=>{V("update:modelValue",d)}),F(()=>{var d;return(d=n.value)==null?void 0:d.groupName},d=>{d&&a.setJobList(d)},{immediate:!0});const p=N(!1),r=N(!1),_=d=>{n.value=d},m=()=>{a.type===0?(e.value=JSON.parse(JSON.stringify(n.value)),p.value=!0):r.value=!0};return(d,b)=>{const y=De,C=Ie,U=je,v=he;return i(),j("div",Ba,[c("div",{class:Te([`${d.disabled?"start-node-disabled":"node-wrap-box-hover"} ${s(a).type===2?"node-error-success":""}`,"node-wrap-box start-node"]),onClick:m},[c("div",Ta,[c("span",ja,[o(y,{dot:"",color:n.value.workflowStatus===1?"#52c41a":"#ff000d"},null,8,["color"]),B("  "+x(n.value.workflowName?n.value.workflowName:s(g)("snail.form.groupName")),1)])]),n.value.groupName?(i(),j("div",Ia,[c("div",null,[c("span",Ua,x(s(g)("snail.groupName"))+": ",1),o(C,{class:"max-w-132px"},{default:t(()=>[B(x(n.value.groupName),1)]),_:1})]),c("div",null,[c("span",Ra,x(s(g)("snail.blockStrategy"))+": ",1),B(" "+x(s(g)(s(mo)[n.value.blockStrategy])),1)]),La])):(i(),j("div",Da,[c("span",Ea,x(s(g)("snail.form.workflowTip")),1)])),s(a).type===2?(i(),I(v,{key:2},{trigger:t(()=>[c("div",{class:"error-tip text-24px",style:ke({color:s(X)[3].color})},[o(U,{icon:s(X)[3].icon},null,8,["icon"])],4)]),default:t(()=>[B(" "+x(s(X)[3].title),1)]),_:1})):T("",!0)],2),o(fe,{modelValue:n.value.nodeConfig,"onUpdate:modelValue":b[0]||(b[0]=$=>n.value.nodeConfig=$),disabled:d.disabled},null,8,["modelValue","disabled"]),s(a).type!==0?(i(),I(Sa,{key:0,open:r.value,"onUpdate:open":b[1]||(b[1]=$=>r.value=$),modelValue:n.value,"onUpdate:modelValue":b[2]||(b[2]=$=>n.value=$)},null,8,["open","modelValue"])):T("",!0),o(Va,{open:p.value,"onUpdate:open":b[3]||(b[3]=$=>p.value=$),modelValue:e.value,"onUpdate:modelValue":b[4]||(b[4]=$=>e.value=$),onSave:_},null,8,["open","modelValue"])])}}}),Ma=pe(za,[["__scopeId","data-v-58e1938e"]]),Oa={class:"workflow"},Aa={class:"workflow-affix"},qa={class:"header"},Pa={class:"ml-8px mr-8px text-18px text-#333639 dark:text-#d6d6d6"},Wa={key:0,class:"buttons"},Fa={class:"workflow-body"},Ya={class:"box-scale"},Ha={class:"end-node"},Ga=c("div",{class:"end-node-circle"},null,-1),Ja={class:"end-node-text"},ts=G({name:"SnailWorkflow",__name:"workflow",props:{modelValue:{default:()=>({})},spinning:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","save","cancel"],setup(l,{emit:w}){const f=l,V=w,a=N(100),e=N({}),n=async()=>{V("save")},p=()=>{V("cancel")};F(()=>f.modelValue,_=>{e.value=_},{immediate:!0,deep:!0}),F(()=>e.value,_=>{V("update:modelValue",_)});const r=_=>{a.value+=10*_,a.value<=10?a.value=10:a.value>=300&&(a.value=300)};return(_,m)=>{const d=Mt,b=ne,y=he,C=ho,U=kt,v=io;return i(),j("div",Oa,[c("div",Aa,[o(U,{"trigger-top":0},{default:t(()=>[c("div",qa,[c("div",null,[o(y,null,{trigger:t(()=>[o(b,{type:"info",size:"small",strong:"",onClick:m[0]||(m[0]=$=>r(-1))},{default:t(()=>[o(d)]),_:1})]),default:t(()=>[B(" 缩小 ")]),_:1}),c("span",Pa,x(a.value)+"%",1),o(y,null,{trigger:t(()=>[o(b,{type:"info",size:"small",strong:"",onClick:m[1]||(m[1]=$=>r(1))},{default:t(()=>[o(C)]),_:1})]),default:t(()=>[B(" 放大 ")]),_:1})]),_.disabled?T("",!0):(i(),j("div",Wa,[o(b,{type:"info",onClick:n},{default:t(()=>[B("保存")]),_:1}),o(b,{class:"ml-16px",onClick:p},{default:t(()=>[B("取消")]),_:1})]))])]),_:1}),c("div",Fa,[o(v,{show:_.spinning},{default:t(()=>[c("div",{class:"workflow-design",style:ke(`transform: scale(${a.value/100})`)},[c("div",Ya,[o(Ma,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=$=>e.value=$),disabled:_.disabled},null,8,["modelValue","disabled"]),e.value.nodeConfig?(i(),I(xa,{key:0,modelValue:e.value.nodeConfig,"onUpdate:modelValue":m[3]||(m[3]=$=>e.value.nodeConfig=$),disabled:_.disabled},null,8,["modelValue","disabled"])):T("",!0),c("div",Ha,[Ga,c("div",Ja,x(s(g)("node.endNode")),1)])])],4)]),_:1},8,["show"])])])])}}});export{ts as _};
