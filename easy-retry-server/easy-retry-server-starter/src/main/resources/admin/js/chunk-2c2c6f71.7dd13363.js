(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c2c6f71"],{"24a0":function(t,a,e){"use strict";e("8ef7")},"29a9":function(t,a,e){"use strict";e("7739")},"2f3a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-row",{attrs:{gutter:24}},[e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:8}},[e("chart-card",{attrs:{loading:t.loading,title:t.$t("dashboard.analysis.total-sales"),total:t.retryTask.totalNum}},[e("a-tooltip",{attrs:{slot:"action",title:"总任务量: 重试/回调任务量"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",{staticClass:"antv-chart-mini"},[e("div",{staticClass:"chart-wrapper",style:{height:46}},[e("v-chart",{attrs:{"force-fit":!0,height:t.height,data:t.retryTaskBarList,padding:[30,22,18,10]}},[e("v-tooltip"),e("v-bar",{attrs:{position:"x*taskTotal"}})],1)],1)]),e("template",{slot:"footer"},[e("div",[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("完成")]),t._v(" "+t._s(t.retryTask.finishNum)+" "),e("a-divider",{attrs:{type:"vertical"}}),e("span",{attrs:{slot:"term"},slot:"term"},[t._v("运行中")]),t._v(" "+t._s(t.retryTask.runningNum)+" "),e("a-divider",{attrs:{type:"vertical"}}),e("span",{attrs:{slot:"term"},slot:"term"},[t._v("最大次数")]),t._v(" "+t._s(t.retryTask.maxCountNum)+" "),e("a-divider",{attrs:{type:"vertical"}}),e("span",{attrs:{slot:"term"},slot:"term"},[t._v("暂停重试")]),t._v(" "+t._s(t.retryTask.suspendNum)+" ")],1)])],2)],1),e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:8}},[e("chart-card",{attrs:{loading:t.loading,title:"定时任务",total:t.jobTask.totalNum}},[e("a-tooltip",{attrs:{slot:"action",title:"成功率:总完成/总调度量;"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",[e("a-tooltip",{attrs:{title:"成功率"}},[e("a-progress",{attrs:{"stroke-linecap":"square",percent:t.jobTask.successRate}})],1)],1),e("template",{slot:"footer"},[t._v(" "+t._s(t.$t("dashboard.analysis.job_success"))+" "),e("span",[t._v(t._s(t.jobTask.successNum))]),e("a-divider",{attrs:{type:"vertical"}}),t._v(" "+t._s(t.$t("dashboard.analysis.job_fail"))+" "),e("span",[t._v(t._s(t.jobTask.failNum))]),e("a-divider",{attrs:{type:"vertical"}}),t._v(" "+t._s(t.$t("dashboard.analysis.job_stop"))+" "),e("span",[t._v(t._s(t.jobTask.stopNum))]),e("a-divider",{attrs:{type:"vertical"}}),t._v(" "+t._s(t.$t("dashboard.analysis.job_cancel"))+" "),e("span",[t._v(t._s(t.jobTask.cancelNum))])],1)],2)],1),e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:8}},[e("a",{attrs:{href:"#"},on:{click:t.jumpPosList}},[e("chart-card",{attrs:{loading:t.loading,title:"总在线机器",total:t.onLineService.total}},[e("a-tooltip",{attrs:{slot:"action",title:"总在线机器:注册到系统的客户端和服务端之和"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("template",{slot:"footer"},[e("div",[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("客户端")]),t._v(" "+t._s(t.onLineService.clientTotal)+" "),e("a-divider",{attrs:{type:"vertical"}}),e("span",{attrs:{slot:"term"},slot:"term"},[t._v("服务端")]),t._v(" "+t._s(t.onLineService.serverTotal)+" ")],1)])],2)],1)])],1),e("a-card",{attrs:{loading:t.loading,bordered:!0,"body-style":{padding:"0"}}},[e("div",{staticClass:"salesCard"},[e("a-tabs",{on:{change:t.callback}},[e("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[e("div",{staticClass:"extra-item"},[e("a",{attrs:{href:"#"},on:{click:function(a){return t.dataHandler("DAY")}}},[e("a-checkable-tag",{attrs:{checked:"DAY"==t.type}},[t._v(t._s(t.$t("dashboard.analysis.all-day")))])],1),e("a",{attrs:{href:"#"},on:{click:function(a){return t.dataHandler("WEEK")}}},[e("a-checkable-tag",{attrs:{checked:"WEEK"==t.type}},[t._v(t._s(t.$t("dashboard.analysis.all-week")))])],1),e("a",{attrs:{href:"#"},on:{click:function(a){return t.dataHandler("MONTH")}}},[e("a-checkable-tag",{attrs:{checked:"MONTH"==t.type}},[t._v(t._s(t.$t("dashboard.analysis.all-month")))])],1),e("a",{attrs:{href:"#"},on:{click:function(a){return t.dataHandler("YEAR")}}},[e("a-checkable-tag",{attrs:{checked:"YEAR"==t.type}},[t._v(t._s(t.$t("dashboard.analysis.all-year")))])],1)]),e("div",{staticClass:"extra-item"},[e("a-range-picker",{attrs:{"show-time":{format:"HH:mm:ss",defaultValue:[t.moment("00:00:00","HH:mm:ss"),t.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss",placeholder:["开始时间","结束时间"]},on:{change:t.dateChange}})],1),e("a-select",{style:{width:"256px"},attrs:{placeholder:"请输入组名称",allowClear:!0},on:{change:function(a){return t.handleChange(a)}}},t._l(t.groupNameList,(function(a){return e("a-select-option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),1)],1),t.$auth("RetryAnalysis.retry")?e("a-tab-pane",{key:"RETRY",attrs:{loading:"true",tab:t.$t("dashboard.analysis.sales")}},[e("div",[e("retry-analysis",{ref:"retryAnalysisRef"})],1)]):t._e(),t.$auth("JobAnalysis.job")?e("a-tab-pane",{key:"JOB",attrs:{tab:t.$t("dashboard.analysis.visits")}},[e("div",[e("job-analysis",{ref:"jobAnalysisRef"})],1)]):t._e()],1)],1)])],1)},i=[],n=e("2af9"),r=e("0fea"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"antd-pro-pages-dashboard-analysis-twoColLayout",class:!t.isMobile&&"desktop"},[e("a-row",[e("a-col",{attrs:{xl:16,lg:12,md:12,sm:24,xs:24}},[e("g2-retry-line",{ref:"viewChart",attrs:{name:"RetryLine"}})],1),e("a-col",{attrs:{xl:8,lg:12,md:12,sm:24,xs:24}},[e("rank-list",{attrs:{title:t.$t("dashboard.analysis.sales-ranking"),list:t.rankList}})],1)],1),e("a-row",{style:{marginTop:"24px"},attrs:{gutter:24,type:"flex"}},[e("a-col",{attrs:{xl:12,lg:24,md:24,sm:24,xs:24}},[e("a-card",{style:{height:"100%"},attrs:{loading:t.loading,bordered:!1,title:"场景列表"}},[e("s-table",{ref:"table",attrs:{size:"default",rowKey:function(t,a){return a},columns:t.columns,data:t.loadData,scroll:{x:200}}})],1)],1),e("a-col",{attrs:{xl:12,lg:24,md:24,sm:24,xs:24}},[e("a-card",{staticClass:"antd-pro-pages-dashboard-analysis-salesCard",style:{height:"100%"},attrs:{loading:t.loading,bordered:!1,title:t.$t("dashboard.analysis.the-proportion-of-sales")}},[e("h4",[t._v(t._s(t.$t("dashboard.analysis.sales")))]),e("div",[e("div",[e("v-chart",{attrs:{"force-fit":!0,height:405,data:t.pieData,scale:t.pieScale}},[e("v-tooltip",{attrs:{showTitle:!1,dataKey:"value*percent"}}),e("v-axis"),e("v-legend",{attrs:{dataKey:"value"}}),e("v-pie",{attrs:{position:"percent",color:"value",vStyle:t.pieStyle}}),e("v-coord",{attrs:{type:"theta",radius:.95,innerRadius:.7}})],1)],1)])])],1)],1)],1)},l=[],d=(e("3dec"),e("9c6a"),e("432bc")),c=e("d01d"),u=e("1635"),m=e.n(u),h={name:"RetryAnalysis",mixins:[d["a"]],components:{G2RetryLine:c["a"],RankList:n["h"],STable:n["i"]},data:function(){var t=this;return{loading:!0,rankList:[],taskList:[],type:"WEEK",groupName:"",startTime:[],endTime:[],groupNameList:[],pieScale:[{dataKey:"percent",min:0,formatter:".0%"}],pieData:[],pieStyle:{stroke:"#fff",lineWidth:1},columns:[{title:"组名称",dataIndex:"groupName"},{title:"启动中",dataIndex:"run"},{title:"总场景",dataIndex:"total"}],loadData:function(a){return Object(r["m"])(Object.assign(a)).then((function(a){return t.rankList=a.data.rankList,a.data.taskList}))}}},mounted:function(){var t=this;this.$bus.$on("retry",(function(a){t.total=0,t.successNum=0,t.runningNum=0,t.maxCountNum=0,t.suspendNum=0,t.rankList=a.data.rankList,t.taskList=a.data.taskList,a.data.dashboardLineResponseDOList.forEach((function(a){t.successNum+=a.successNum,t.runningNum+=a.runningNum,t.maxCountNum+=a.maxCountNum,t.suspendNum+=a.suspendNum})),t.total=t.successNum+t.runningNum+t.maxCountNum+t.suspendNum,t.pieData=[{value:"SUCCESS",name:t.successNum,percent:t.successNum/t.total},{value:"RUNNING",name:t.runningNum,percent:t.runningNum/t.total},{value:"MAXCOUNT",name:t.maxCountNum,percent:t.maxCountNum/t.total},{value:"SUSPEND",name:t.suspendNum,percent:t.suspendNum/t.total}]}))},methods:{moment:m.a,dataHandler:function(t){this.type=t,this.$refs.viewChart.getDashboardRetryLine(this.groupName,this.type,this.startTime,this.endTime)},handleChange:function(t){this.groupName=t,this.$refs.viewChart.getDashboardRetryLine(this.groupName,this.type,this.startTime,this.endTime)},dateChange:function(t,a){this.startTime=a[0],this.endTime=a[1],this.type=""===this.startTime?"WEEK":"OTHERS",this.$refs.viewChart.getDashboardRetryLine(this.groupName,this.type,this.startTime,this.endTime)}},created:function(){var t=this;Object(r["j"])().then((function(a){t.groupNameList=a.data})),setTimeout((function(){t.loading=!t.loading}),1e3)}},p=h,f=(e("24a0"),e("f7c6")),y=Object(f["a"])(p,o,l,!1,null,"348101e7",null),b=y.exports,g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"antd-pro-pages-dashboard-analysis-twoColLayout",class:!t.isMobile&&"desktop"},[e("a-row",[e("a-col",{attrs:{xl:16,lg:12,md:12,sm:24,xs:24}},[e("g2-job-line",{ref:"jobViewChart",attrs:{name:"G2JobLine"}})],1),e("a-col",{attrs:{xl:8,lg:12,md:12,sm:24,xs:24}},[e("rank-list",{attrs:{title:"失败任务排名",list:t.rankList}})],1)],1),e("a-row",{style:{marginTop:"24px"},attrs:{gutter:24,type:"flex"}},[e("a-col",{attrs:{xl:12,lg:24,md:24,sm:24,xs:24}},[e("a-card",{style:{height:"100%"},attrs:{loading:t.loading,bordered:!1,title:t.$t("dashboard.analysis.online-top-search")}},[e("s-table",{ref:"table",attrs:{size:"default",rowKey:function(t,a){return a},columns:t.columns,data:t.loadData,scroll:{x:200}}})],1)],1),e("a-col",{attrs:{xl:12,lg:24,md:24,sm:24,xs:24}},[e("a-card",{staticClass:"antd-pro-pages-dashboard-analysis-salesCard",style:{height:"100%"},attrs:{loading:t.loading,bordered:!1,title:t.$t("dashboard.analysis.the-proportion-of-sales")}},[e("h4",[t._v(t._s(t.$t("dashboard.analysis.job.sales")))]),e("div",[e("div",[e("v-chart",{attrs:{"force-fit":!0,height:405,data:t.pieData,scale:t.pieScale}},[e("v-tooltip",{attrs:{showTitle:!1,dataKey:"value*percent"}}),e("v-axis"),e("v-legend",{attrs:{dataKey:"value"}}),e("v-pie",{attrs:{position:"percent",color:"value",vStyle:t.pieStyle}}),e("v-coord",{attrs:{type:"theta",radius:.95,innerRadius:.7}})],1)],1)])])],1)],1)],1)},v=[],k=e("b790"),T={name:"JobAnalysis",mixins:[d["a"]],components:{G2JobLine:k["a"],RankList:n["h"],STable:n["i"]},data:function(){var t=this;return{loading:!0,rankList:[],taskList:[],dashboardLineResponseDOList:[],type:"WEEK",groupName:"",startTime:"",endTime:"",success:0,fail:0,stop:0,cancel:0,total:0,groupNameList:[],pieScale:[{dataKey:"percent",min:0,formatter:".0%"}],pieData:[],pieStyle:{stroke:"#fff",lineWidth:1},columns:[{title:"组名称",dataIndex:"groupName"},{title:"运行中任务数",dataIndex:"run"},{title:"总任务数",dataIndex:"total"}],loadData:function(a){return Object(r["l"])(Object.assign(a)).then((function(a){return t.rankList=a.data.rankList,a.data.taskList}))}}},mounted:function(){var t=this;this.$bus.$on("job",(function(a){t.total=0,t.success=0,t.fail=0,t.stop=0,t.cancel=0,t.rankList=a.data.rankList,t.taskList=a.data.taskList,a.data.dashboardLineResponseDOList.forEach((function(a){t.success+=a.success,t.fail+=a.fail,t.stop+=a.stop,t.cancel+=a.cancel})),t.total=t.success+t.fail+t.stop+t.cancel,t.pieData=[{value:"SUCCESS",name:t.success,percent:t.success/t.total},{value:"FAIL",name:t.fail,percent:t.fail/t.total},{value:"STOP",name:t.stop,percent:t.stop/t.total},{value:"CANCEL",name:t.cancel,percent:t.cancel/t.total}]}))},methods:{moment:m.a,dataHandler:function(t){this.type=t,this.$refs.jobViewChart.getDashboardJobLine(this.groupName,this.type,this.startTime,this.endTime)},handleChange:function(t){this.groupName=t,this.$refs.jobViewChart.getDashboardJobLine(this.groupName,this.type,this.startTime,this.endTime)},dateChange:function(t,a){this.startTime=a[0],this.endTime=a[1],this.type=""===this.startTime?"WEEK":"OTHERS",this.$refs.jobViewChart.getDashboardJobLine(this.groupName,this.type,this.startTime,this.endTime)}},created:function(){var t=this;Object(r["j"])().then((function(a){t.groupNameList=a.data})),setTimeout((function(){t.loading=!t.loading}),1e3)}},N=T,L=(e("4b72"),Object(f["a"])(N,g,v,!1,null,"1e60125d",null)),_=L.exports,x=e("9fb0"),C=e("2ae8"),j=e.n(C),$={name:"Analysis",components:{RetryAnalysis:b,JobAnalysis:_,ChartCard:n["b"],MiniArea:n["d"],MiniProgress:n["e"],Bar:n["a"],Trend:n["j"],NumberInfo:n["g"],MiniSmoothArea:n["f"]},data:function(){return{loading:!0,height:100,retryTaskBarList:[],groupNameList:[],type:"WEEK",mode:"",retryTask:{totalNum:0,runningNum:0,finishNum:0,maxCountNum:0,suspendNum:0},jobTask:{successRate:0,successNum:0,failNum:0,cancelNum:0,stopNum:0,totalNum:0},onLineService:{clientTotal:0,serverTotal:0,total:0}}},computed:{},methods:{moment:m.a,callback:function(t){this.mode=t},jumpPosList:function(){this.$router.push({path:"/dashboard/pods"})},dataHandler:function(t){this.type=t,"ALL"===this.mode||"RETRY"===this.mode?this.$refs.retryAnalysisRef.dataHandler(this.type):this.$refs.jobAnalysisRef.dataHandler(this.type)},dateChange:function(t,a){"ALL"===this.mode||"RETRY"===this.mode?this.$refs.retryAnalysisRef.dateChange(t,a):this.$refs.jobAnalysisRef.dateChange(t,a)},handleChange:function(t){"ALL"===this.mode||"RETRY"===this.mode?this.$refs.retryAnalysisRef.handleChange(t):this.$refs.jobAnalysisRef.handleChange(t)}},created:function(){var t=this;this.mode=j.a.get(x["c"]),Object(r["n"])().then((function(a){t.retryTask=a.data.retryTask,t.jobTask=a.data.jobTask,t.onLineService=a.data.onLineService,t.retryTaskBarList=a.data.retryTaskBarList})),Object(r["j"])().then((function(a){t.groupNameList=a.data})),setTimeout((function(){t.loading=!t.loading}),1e3)}},R=$,S=(e("29a9"),Object(f["a"])(R,s,i,!1,null,"fadd4806",null));a["default"]=S.exports},"432bc":function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));var s=e("e97b"),i=e("5880"),n={computed:Object(s["a"])(Object(s["a"])({},Object(i["mapState"])({layout:function(t){return t.app.layout},navTheme:function(t){return t.app.theme},primaryColor:function(t){return t.app.color},colorWeak:function(t){return t.app.weak},fixedHeader:function(t){return t.app.fixedHeader},fixedSidebar:function(t){return t.app.fixedSidebar},contentWidth:function(t){return t.app.contentWidth},autoHideHeader:function(t){return t.app.autoHideHeader},isMobile:function(t){return t.app.isMobile},sideCollapsed:function(t){return t.app.sideCollapsed},multiTab:function(t){return t.app.multiTab}})),{},{isTopMenu:function(){return"topmenu"===this.layout}}),methods:{isSideMenu:function(){return!this.isTopMenu}}}},"4b72":function(t,a,e){"use strict";e("7b4e")},7739:function(t,a,e){},"7b4e":function(t,a,e){},"8ef7":function(t,a,e){}}]);