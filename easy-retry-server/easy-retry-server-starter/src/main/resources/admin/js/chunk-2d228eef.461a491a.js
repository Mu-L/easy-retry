(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228eef"],{dafb:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"组名称"}},[t("a-select",{attrs:{placeholder:"请输入组名称"},on:{change:function(t){return e.handleChange(t)}},model:{value:e.queryParam.groupName,callback:function(t){e.$set(e.queryParam,"groupName",t)},expression:"queryParam.groupName"}},e._l(e.groupNameList,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])})),1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"场景名称"}},[t("a-select",{attrs:{placeholder:"请选择场景名称",allowClear:""},model:{value:e.queryParam.sceneName,callback:function(t){e.$set(e.queryParam,"sceneName",t)},expression:"queryParam.sceneName"}},e._l(e.sceneList,(function(a){return t("a-select-option",{key:a.sceneName,attrs:{value:a.sceneName}},[e._v(" "+e._s(a.sceneName))])})),1)],1)],1),e.advanced?[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"业务编号"}},[t("a-input",{attrs:{placeholder:"请输入业务编号",allowClear:""},model:{value:e.queryParam.bizNo,callback:function(t){e.$set(e.queryParam,"bizNo",t)},expression:"queryParam.bizNo"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"幂等id"}},[t("a-input",{attrs:{placeholder:"请输入幂等id",allowClear:""},model:{value:e.queryParam.idempotentId,callback:function(t){e.$set(e.queryParam,"idempotentId",t)},expression:"queryParam.idempotentId"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"UniqueId"}},[t("a-input",{attrs:{placeholder:"请输入唯一id",allowClear:""},model:{value:e.queryParam.uniqueId,callback:function(t){e.$set(e.queryParam,"uniqueId",t)},expression:"queryParam.uniqueId"}})],1)],1)]:e._e(),t("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.resetFiled}},[e._v("重置")]),t("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),t("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1),t("div",{staticClass:"table-operator"},[e.selectedRowKeys.length>0?t("a-dropdown",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[t("a-menu",{attrs:{slot:"overlay"},on:{click:e.onClick},slot:"overlay"},[t("a-menu-item",{key:"1"},[t("a-icon",{attrs:{type:"delete"}}),e._v("回滚")],1),t("a-menu-item",{key:"2"},[t("a-icon",{attrs:{type:"edit"}}),e._v("删除")],1)],1),t("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),t("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,scroll:{x:2e3}},scopedSlots:e._u([{key:"serial",fn:function(a,n){return t("span",{},[e._v(" "+e._s(n.id)+" ")])}},{key:"taskType",fn:function(a){return t("span",{},[t("a-tag",{attrs:{color:e.taskType[a].color}},[e._v(" "+e._s(e.taskType[a].name)+" ")])],1)}},{key:"action",fn:function(a,n){return t("span",{},[[t("a-popconfirm",{attrs:{title:"是否确认回滚?","ok-text":"回滚","cancel-text":"取消"},on:{confirm:function(t){return e.handleRollback(n)}}},[t("a",{attrs:{href:"javascript:;"}},[e._v("回滚")])]),t("a-divider",{attrs:{type:"vertical"}})],t("a-dropdown",[t("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("a",{on:{click:function(t){return e.handleInfo(n)}}},[e._v("详情")])]),t("a-menu-item",[t("a-popconfirm",{attrs:{title:"是否删除?","ok-text":"删除","cancel-text":"取消"},on:{confirm:function(t){return e.handleDelete(n)}}},[t("a",{attrs:{href:"javascript:;"}},[e._v("删除")])])],1)],1)],1)],2)}}])})],1)},r=[],o=a("261e"),s=a("27e3"),i=a("0fea"),l=a("2af9"),c=a("c1df"),d=a.n(c),u={name:"RetryDeadLetterList",components:{AInput:s["a"],ATextarea:o["a"],STable:l["j"]},data:function(){var e=this;return{currentComponet:"List",record:"",mdl:{},advanced:!1,queryParam:{},taskType:{1:{name:"重试数据",color:"#d06892"},2:{name:"回调数据",color:"#f5a22d"}},columns:[{title:"#",scopedSlots:{customRender:"serial"},width:"5%"},{title:"组名称",dataIndex:"groupName",ellipsis:!0},{title:"场景名称",dataIndex:"sceneName",ellipsis:!0},{title:"UniqueId",dataIndex:"uniqueId",width:"10%"},{title:"幂等id",dataIndex:"idempotentId",ellipsis:!0},{title:"业务编号",dataIndex:"bizNo",ellipsis:!0},{title:"任务类型",dataIndex:"taskType",scopedSlots:{customRender:"taskType"},width:"5%"},{title:"创建时间",dataIndex:"createDt",sorter:!0,customRender:function(e){return d()(e).format("YYYY-MM-DD HH:mm:ss")},ellipsis:!0},{title:"操作",dataIndex:"action",width:"150px",fixed:"right",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(i["q"])(Object.assign(t,e.queryParam)).then((function(e){return e}))},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1,groupNameList:[],sceneList:[]}},created:function(){var e=this;Object(i["j"])().then((function(t){e.groupNameList=t.data,null!==e.groupNameList&&e.groupNameList.length>0&&(e.queryParam["groupName"]=e.groupNameList[0],e.$refs.table.refresh(!0),e.handleChange(e.groupNameList[0]))}))},methods:{resetFiled:function(){this.queryParam={},this.sceneList=[]},handleNew:function(){this.$router.push("/form/basic-config")},handleChange:function(e){var t=this;Object(i["w"])({groupName:e}).then((function(e){t.sceneList=e.data}))},handleRollback:function(e){var t=this;Object(i["F"])({groupName:e.groupName,ids:[e.id]}).then((function(e){t.$refs.table.refresh(!0)}))},handleDelete:function(e){var t=this;Object(i["i"])({groupName:e.groupName,ids:[e.id]}).then((function(e){t.$refs.table.refresh(!0)}))},toggleAdvanced:function(){this.advanced=!this.advanced},handleInfo:function(e){this.$router.push({path:"/retry/dead-letter/info",query:{id:e.id,groupName:e.groupName}})},onClick:function(e){var t=e.key;"1"!==t?"2"===t&&this.handlerDel():this.handlerRollback()},handlerRollback:function(){this.$createElement;var e=this;this.$confirm({title:"您要回滚这些数据吗?",content:function(e){return e("div",{style:"color:red;"},["请确认是否回滚!"])},onOk:function(){Object(i["F"])({groupName:e.selectedRows[0].groupName,ids:e.selectedRowKeys}).then((function(t){e.$refs.table.refresh(!0),e.$message.success("成功删除".concat(t.data,"条数据")),e.selectedRowKeys=[]}))},onCancel:function(){},class:"test"})},handlerDel:function(){this.$createElement;var e=this;this.$confirm({title:"您要删除这些数据吗?",content:function(e){return e("div",{style:"color:red;"},["删除后数据不可恢复，请确认!"])},onOk:function(){Object(i["i"])({groupName:e.selectedRows[0].groupName,ids:e.selectedRowKeys}).then((function(t){e.$refs.table.refresh(!0),e.$message.success("成功删除".concat(t.data,"条数据")),e.selectedRowKeys=[]}))},onCancel:function(){},class:"test"})},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},m=u,p=a("2877"),f=Object(p["a"])(m,n,r,!1,null,null,null);t["default"]=f.exports}}]);