(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1444b051"],{"08f3":function(t,e){var a={jobStatusEnum:{0:{name:"关闭",color:"#9c1f1f"},1:{name:"开启",color:"#f5a22d"}},taskType:{1:{name:"集群模式",color:"#d06892"},2:{name:"广播模式",color:"#f5a22d"},3:{name:"分片模式",color:"#e1f52d"}},triggerType:{1:{name:"CRON表达式",color:"#d06892"},2:{name:"固定时间",color:"#f5a22d"}},blockStrategy:{1:{name:"丢弃策略",color:"#d06892"},2:{name:"覆盖",color:"#f5a22d"},3:{name:"并行",color:"#e1f52d"}},executorType:{1:{name:"Java",color:"#d06892"}},routeKey:{4:{name:"轮询",color:"#8f68d2"},1:{name:"一致性Hash",color:"#d06892"},2:{name:"随机",color:"#f5a22d"},3:{name:"LRU",color:"#e1f52d"}},taskBatchStatus:{1:{name:"待处理",color:"#64a6ea"},2:{name:"运行中",color:"#1b7ee5"},3:{name:"成功",color:"#087da1"},4:{name:"失败",color:"#f52d80"},5:{name:"停止",color:"#ac2df5"},6:{name:"取消",color:"#f5732d"}},operationReason:{0:{name:""},1:{name:"执行超时",color:"#64a6ea"},2:{name:"无客户端节点",color:"#1b7ee5"},3:{name:"任务已关闭",color:"#087da1"}},taskStatus:{2:{name:"运行中",color:"#1b7ee5"},3:{name:"成功",color:"#087da1"},4:{name:"失败",color:"#f52d80"},5:{name:"停止",color:"#ac2df5"}}};t.exports=a},"3b7a":function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"j",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"l",(function(){return i})),a.d(e,"f",(function(){return u})),a.d(e,"h",(function(){return l})),a.d(e,"e",(function(){return d})),a.d(e,"d",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"b",(function(){return b})),a.d(e,"i",(function(){return p})),a.d(e,"k",(function(){return h}));var o=a("b775"),r={jobList:"/job/list",jobDetail:"/job/",saveJob:"/job/",updateJob:"/job/",updateJobStatus:"/job/status",delJob:"/job/",timeByCron:"/job/cron",jobNameList:"/job/job-name/list",jobBatchList:"/job/batch/list",jobBatchDetail:"/job/batch/",jobTaskList:"/job/task/list",jobLogList:"/job/log/list"};function n(t){return Object(o["b"])({url:r.jobNameList,method:"get",params:t})}function s(t){return Object(o["b"])({url:r.timeByCron,method:"get",params:t})}function c(t){return Object(o["b"])({url:r.delJob+t,method:"delete"})}function i(t){return Object(o["b"])({url:r.updateJobStatus,method:"put",data:t})}function u(t){return Object(o["b"])({url:r.jobLogList,method:"get",params:t})}function l(t){return Object(o["b"])({url:r.jobTaskList,method:"get",params:t})}function d(t){return Object(o["b"])({url:r.jobBatchList,method:"get",params:t})}function m(t){return Object(o["b"])({url:r.jobBatchDetail+t,method:"get"})}function f(t){return Object(o["b"])({url:r.jobList,method:"get",params:t})}function b(t){return Object(o["b"])({url:r.jobDetail+t,method:"get"})}function p(t){return Object(o["b"])({url:r.saveJob,method:"post",data:t})}function h(t){return Object(o["b"])({url:r.updateJob,method:"put",data:t})}},"76ff":function(t,e,a){"use strict";a.r(e);a("b0c0");var o=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"组名称"}},[e("a-select",{attrs:{placeholder:"请输入组名称"},on:{change:function(e){return t.handleChange(e)}},model:{value:t.queryParam.groupName,callback:function(e){t.$set(t.queryParam,"groupName",e)},expression:"queryParam.groupName"}},t._l(t.groupNameList,(function(a){return e("a-select-option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),1)],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"任务名称"}},[e("a-input",{attrs:{placeholder:"请输入任务名称",allowClear:""},model:{value:t.queryParam.jobName,callback:function(e){t.$set(t.queryParam,"jobName",e)},expression:"queryParam.jobName"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("a-select",{attrs:{placeholder:"请选择状态",allowClear:""},model:{value:t.queryParam.jobStatus,callback:function(e){t.$set(t.queryParam,"jobStatus",e)},expression:"queryParam.jobStatus"}},t._l(t.jobStatusEnum,(function(a,o){return e("a-select-option",{key:o,attrs:{value:o}},[t._v(" "+t._s(a.name))])})),1)],1)],1),t.advanced?void 0:t._e(),e("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons",style:t.advanced&&{float:"right",overflow:"hidden"}||{}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")]),e("a",{staticStyle:{"margin-left":"8px"},on:{click:t.toggleAdvanced}},[t._v(" "+t._s(t.advanced?"收起":"展开")+" "),e("a-icon",{attrs:{type:t.advanced?"up":"down"}})],1)],1)])],2)],1)],1),e("div",{staticClass:"table-operator"},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleNew()}}},[t._v("新增")]),t.selectedRowKeys.length>0?e("a-dropdown",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[e("a-menu",{attrs:{slot:"overlay"},on:{click:t.onClick},slot:"overlay"})],1):t._e()],1),e("s-table",{ref:"table",attrs:{size:"default",rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,scroll:{x:2e3}},scopedSlots:t._u([{key:"serial",fn:function(a,o){return e("span",{},[t._v(" "+t._s(o.id)+" ")])}},{key:"taskType",fn:function(a){return e("span",{},[e("a-tag",{attrs:{color:t.taskType[a].color}},[t._v(" "+t._s(t.taskType[a].name)+" ")])],1)}},{key:"jobStatus",fn:function(a){return e("span",{},[e("a-tag",{attrs:{color:t.jobStatusEnum[a].color}},[t._v(" "+t._s(t.jobStatusEnum[a].name)+" ")])],1)}},{key:"triggerType",fn:function(a){return e("span",{},[e("a-tag",{attrs:{color:t.triggerType[a].color}},[t._v(" "+t._s(t.triggerType[a].name)+" ")])],1)}},{key:"blockStrategy",fn:function(a){return e("span",{},[e("a-tag",{attrs:{color:t.blockStrategy[a].color}},[t._v(" "+t._s(t.blockStrategy[a].name)+" ")])],1)}},{key:"triggerInterval",fn:function(a){return e("span",{},[e("span",[t._v(t._s(a))])])}},{key:"executorTimeout",fn:function(a){return e("span",{},[e("span",[t._v(t._s(a)+"(秒)")])])}},{key:"action",fn:function(a,o){return e("span",{},[[e("a",{on:{click:function(e){return t.handleInfo(o)}}},[t._v("详情")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.goJobBatchList(o)}}},[t._v("批次")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.handleEdit(o)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"是否关闭?","ok-text":"关闭","cancel-text":"取消"},on:{confirm:function(e){return t.handleClose(o)}}},[1===o.jobStatus?e("a",{attrs:{href:"javascript:;"}},[t._v("关闭")]):t._e()]),1===o.jobStatus?e("a-divider",{attrs:{type:"vertical"}}):t._e(),e("a-popconfirm",{attrs:{title:"是否开启?","ok-text":"开启","cancel-text":"取消"},on:{confirm:function(e){return t.handleOpen(o)}}},[0===o.jobStatus?e("a",{attrs:{href:"javascript:;"}},[t._v("开启")]):t._e()]),0===o.jobStatus?e("a-divider",{attrs:{type:"vertical"}}):t._e(),e("a-popconfirm",{attrs:{title:"是否删除任务?","ok-text":"删除","cancel-text":"取消"},on:{confirm:function(e){return t.handleDel(o)}}},[0===o.jobStatus?e("a",{attrs:{href:"javascript:;"}},[t._v("删除")]):t._e()])]],2)}}])})],1)},r=[],n=a("261e"),s=a("27e3"),c=a("2af9"),i=a("3b7a"),u=a("0fea"),l=a("08f3"),d=a.n(l),m={name:"JobList",components:{AInput:s["a"],ATextarea:n["a"],STable:c["j"]},data:function(){var t=this;return{currentComponet:"List",record:"",mdl:{},visible:!1,advanced:!1,queryParam:{},jobStatusEnum:d.a.jobStatusEnum,taskType:d.a.taskType,triggerType:d.a.triggerType,blockStrategy:d.a.blockStrategy,executorType:d.a.executorType,columns:[{title:"ID",scopedSlots:{customRender:"serial"},width:"4%"},{title:"组名称",dataIndex:"groupName",width:"10%"},{title:"任务名称",dataIndex:"jobName",ellipsis:!0,width:"10%"},{title:"触发时间",dataIndex:"nextTriggerAt",ellipsis:!0},{title:"状态",dataIndex:"jobStatus",scopedSlots:{customRender:"jobStatus"}},{title:"任务类型",dataIndex:"taskType",scopedSlots:{customRender:"taskType"}},{title:"触发类型",dataIndex:"triggerType",scopedSlots:{customRender:"triggerType"}},{title:"间隔时长",dataIndex:"triggerInterval",scopedSlots:{customRender:"triggerInterval"},ellipsis:!0},{title:"阻塞策略",dataIndex:"blockStrategy",scopedSlots:{customRender:"blockStrategy"}},{title:"超时时间",dataIndex:"executorTimeout",scopedSlots:{customRender:"executorTimeout"}},{title:"更新时间",dataIndex:"updateDt",sorter:!0,width:"10%"},{title:"操作",fixed:"right",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(i["c"])(Object.assign(e,t.queryParam)).then((function(t){return t}))},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){t.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1,groupNameList:[],sceneList:[]}},created:function(){var t=this;Object(u["i"])().then((function(e){t.groupNameList=e.data,null!==t.groupNameList&&t.groupNameList.length>0&&(t.queryParam["groupName"]=t.groupNameList[0],t.$refs.table.refresh(!0),t.handleChange(t.groupNameList[0]))}))},methods:{handleEdit:function(t){this.$router.push({path:"/job/config",query:{id:t.id}})},goJobBatchList:function(t){this.$router.push({path:"/job/batch/list",query:{jobId:t.id}})},handleNew:function(){this.$router.push({path:"/job/config"})},handleChange:function(t){},toggleAdvanced:function(){this.advanced=!this.advanced},handleInfo:function(t){this.$router.push({path:"/job/info",query:{id:t.id,groupName:t.groupName}})},handleOk:function(t){},handleClose:function(t){var e=this;Object(i["l"])({id:t.id,jobStatus:0}).then((function(t){var a=t.status;0===a?e.$message.error("关闭失败"):(e.$refs.table.refresh(!0),e.$message.success("关闭成功"))}))},handleOpen:function(t){var e=this;Object(i["l"])({id:t.id,jobStatus:1}).then((function(t){var a=t.status;0===a?e.$message.error("开启失败"):(e.$refs.table.refresh(!0),e.$message.success("开启成功"))}))},handleDel:function(t){var e=this;Object(i["a"])(t.id).then((function(t){var a=t.status;0===a?e.$message.error("删除失败"):(e.$refs.table.refresh(!0),e.$message.success("删除成功"))}))},refreshTable:function(t){this.$refs.table.refresh(!0)},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},onClick:function(t){var e=t.key;"2"!==e?"1"===e&&this.handlerDel():this.$refs.batchUpdateRetryTaskInfo.isShow(!0,this.selectedRows,this.selectedRowKeys)}}},f=m,b=a("2877"),p=Object(b["a"])(f,o,r,!1,null,null,null);e["default"]=p.exports}}]);